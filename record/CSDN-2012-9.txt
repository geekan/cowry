
大会即将开始，精彩内容敬请期待！ 在大会主会场，CSDN创始人兼董事长蒋涛致开场词。看蒋涛如何剖析这个全新的“开发者大时代”。 [9:34:43]
管理员: 在大会主会场，腾讯首席科学家孙国政带来了主题为《超大规模用户数据挖掘和推荐算法最新进展》的精彩演讲。 [9:37:31]
管理员: 孙国政：大家好，我来自腾讯公司，我今天演讲的题目是超大规模用户数据挖掘和推荐算法最新进展，并且从KDD―CUP2012谈起。 [9:44:48]
管理员: 刚才讲到国际会议好多高手都参加，现在这个世界是一个互联网时代，也可以说是一个大数据时代。比如说我们现在每天能出现2.5quintilion的数据，这就给大家一个挑战，这些数据怎么办？如果现在开始每年能够在将来10年中有50倍数据增长量，在第三年，现在世界五百强每个公司都有一个新的计划就是怎么来收集大数据，可见大数据现在很重要。究竟大数据问题是个烦恼还是商机，这是给所有公司和开发者的一个重要问题。我们现在所看到的好多公司一些管理层把大数据都当成烦恼，怎么来处理？其实它孕育了很多商机，比如现在根据美国健康总署，他们估计如果把现在数据都用好了，他们相当于每年收入300万美元，这相当于大数据处理好了有很大商机。 [9:45:0]
孙国政: 现在我们面临的挑战一个方面是大数据能够看的着能够存储能够处理，更重要的是大数据怎么为我们造福，现在就有一个怎么发展数据为用户、为广大网民服务的问题。在这样的情况下，就出现了KDD―CUP的比赛，今年KDD―CUP选的题目有两个，一个是根据腾讯微博数据，你推荐一个名人收不收听，收听了说明你感兴趣，我们就给你所有数据让你算一下用户收听这个人的机率。 [9:51:33]
管理员: 第二个是搜搜商业搜索的数据，每个搜索引擎都有些广告推荐，有些广告对大家很有用，就会点击。所以我们就是计算一下给个广告给用户被点击机率有多大，我们今年都有很大的增加。比如说Track1，它出现了一个收听一个人，有电极就是感兴趣，我们给的数据是分两个，一个是微博用户，另外一个是名人。用户有很多数据，包括年龄、性别等等词语来描述，还有用户在上面的动作，比如回复评论等等，还有一个是他们之间什么关系，谁收听谁这个数据。还有一个是每个人根据他过去的博文抽出一些关健词，也给用户提供。还有一个是每个推荐人属于哪个方面的，我们把这个人推荐给一个用户，算算被点击的的机率有多大。我们的数据是有50天的记录，包括用户的描述等等。 [9:57:35]
孙国政: 数不是怎么分布的呢？横轴是假如推荐的话有多少人多大机率收听。被收听多的人基本比较少，推荐人是蓝色的、绿色是用户，被收听超过50%的基本没有，大部分是收听率很少。假如说我和被收听人有关系的话，有多少路径能通过中间人达到。比如说我的偶像是他，偶像的偶像是他，诸如此类，中间通过的路径越多被收听机率越大。 [9:58:34]
孙国政: 我们最终怎么衡量比赛结果？我们有一个MAP，公式我就不再详述了。 [9:59:13]
孙国政: 另外有Track2，我们每个Session是用户、广告、ads都给了，还有姓名、年龄、广告等等都给了，因为参加人大部分都不懂中文，所以我们把中文部分用个数码来表示，另外为了保护用户隐私性，也用数码来表示，究竟什么意思不知道，所以在这里懂中文的没啥好处。点击用户记录数据很大，纵轴是数目，横轴是展现的次数，如果展现越多的话大约点击越少。它的衡量标准我们用AUC，我们基本采用标准方式来衡量。 [9:59:33]
孙国政: KDD―CUP基本有三个特点，第一数据比往年量大，直接来自真实产品运营日志，没有经过任何改变。第二参加人数与往年比也是最多的，traca1三千多人，traca2五千多人。第三数据集非常复杂，参赛者需要自己进行处理，形成缄默所需的特征变量，且变量的最终数目还取决于参赛者处理方法，是没有标准答案的。 [10:0:10]
孙国政: KDD―CUP大赛结束之后评了三个得奖团队，通过分析他们的结果，有些东西值得跟大家分享。首先介绍一下比赛数据特点，数据稀疏性是现在所有大用户数据的一个问题，矩阵好多点都是空的，只有几个点才有数据，虽然很多但是在矩阵上是很稀疏。另外有很多数据需要自己清理，你自己决定要不要这些数据，数据很复杂。另外也有严重的冷启动问题，我们大家知道通常根据以往大家行为看你的兴趣来推断你下面对什么感兴趣，但是有可能我们在这里所看的用户，有77%的用户做训练的数据里没看到，他是新用户，他们没有行为历史，这对冷启动是一个大的挑战。 [10:0:27]
孙国政: 另外数据也不平衡，大部分没有收听，90%以上的都是没收听。后来我们把数据公布之后，每天可以上传东西，大家来排宝，我们还提供了一个简单的算法放在那儿，一开始没人超过，但是过了几天好的结果都排在前面了。 [10:0:30]
孙国政: 在数据处理上是一个很大的特点，凡是能够得到优胜的大部分对数据的理解是很到位的，比如说有些数据推荐其实就是没收听的并不等于用户不喜欢它，因为你的前后时间太短了，他们分析了这些就去除了很多不需要的数据，另外把数据分类、噪音去除，这样一处理数据精简了很多。 [10:1:57]
孙国政: 这是一个数据处理图，这个是很不成比例的，他们用一对对来比较，如果对不成比例就不好做。另外一个成功特点，大家都用matrix foctorization modeling，这是近几年来做数据处理一个通用的办法，解决Sparsity问题的有效算法。 [10:2:22]
孙国政: 这个矩阵很稀疏，他可以分成两个矩阵相乘，我在这里没有时间仔细结束了，大致体会是参数减少的工作，没有这个工作数据稀疏性无法解决。成功算法还有一个特点是很好地解决了冷启动的问题，比如说把用户ID的年龄、性别分类，中山大学这方面做的比较好，他们通过这个关系来通过词的关系挖掘用户兴趣，这种对数据的理解很好地解决了冷启动的问题。另外他们都成功解决了Time dependence的问题，今年我们比赛跟时间有关系，我们都有一个时间窗几月几日几点几分推荐的，下一个时段他会不会火，下一部分发生什么新闻事件，通常我们是没有把时间因素加引来，现在就需要把时间因素加进来。这个是一个德国人在Track1得了的一名，他在把时间分成不同的Solutions，具体来说两种方法，一种是Time oware modeling，你在推荐的时候除了其他算法，再加一个跟时间有关系的阈值，这种阈值参数是通过学习出来的，这就使得解决时间问题得到成功。再一个做法是用Seruential features，这跟时间有关，这个Solutions有多长，把跟时间有关系的词都放进去发现非常有用，我们最后衡量MAP增加5.1%，这是很大的增长。 [10:2:37]
孙国政: 还有一个成功的特点是用Diverse models，这一点是台大得了第一名，各种方式，千奇百怪的方法都试了，把推荐当成ranking、当成classification、regression等等方法，这样每种解决方法都有结果了，最后合并到一块儿叫Ensemble leaming，这也是许多参赛者在应用上的一个成功的特点。 [10:4:25]
孙国政: Tarck1第二名和track2第三名，两个都得奖，但是他不懂中文，他说我不管什么问题我用统一办法处理，叫Prediction with factorization Machines，本来是非常稀疏的二维矩阵被分解了，他这个好在把整个过程是统一的，这里边对用户推荐的东西都是线性的，他引用了second order。不管是什么factorization 都用0和1表示出来，整个都变成二进制，这一点非常有意思。我们大家都是数据挖掘的高手，KDD―CUP的我们两个第一名都是中国的，一个台湾的一个中国大陆的。 [10:5:13]
孙国政: 现在数据用途从广告搜索、娱乐、内容等等都要服务用户，所以推荐技术应运而生，但是推荐系统有几个要关注的问题。第一个是Context aware的处理，Context包括时间、地点、涉及公司和用户的情绪、属性、社交网络等等属性，这个问题是我们要很好研究的课题，现在微博推荐也是这样，就是不同场景下收听率是不一样的。再一个就是Heteragenity，有不同形式不同渠道的，你怎么统一到一块儿。另外你推荐应该跟它的内容，比如你了解不了解这个人的背景等等。第三个你要做推荐必须以用户为中心，最重要的是用户接不接受，你别推荐了半天人家不接受，那也没用啊。 [10:9:29]
孙国政: 在这里有很多算法来研究，我们怎么能让用户感到满意，这样界面交互很重要，你显示不好人家不接受，或者写的词跟内容不搭界人家也不接受。这每一篇都代表了一篇文章，基本想解决冷启动问题就是把用户相关其他信息引进来。现在推荐都跟社区相关，基于社交网络和用户可信度的跟随领导的模型聚类，这个也变成当今所研究的一个问题。再一个是Knowledge―based，你了解的东西你才推荐的清楚，你不了解的东西就推荐不好，所以推荐库里面有什么、喜欢什么、新颖的东西是什么等等，这个弄好了才能做好推荐。再一个是Evaluation，你推荐是全部该推荐的都推荐了吗？推荐的是不是有互相重复的？重复了第二次人家就不喜欢了，根据推荐的东西之间的关系有关，这方面Evaluation就变得更复杂一些，你推荐的东西必须有吸引性，人家才容易接收， 所以系统引进了多因素，有可能推荐不是一次，而是通过对话，这样推荐才更有目的性。如果不是表示的很清楚，推荐效率就不大。 [10:10:49]
孙国政: 总之在推荐方面有很多挑战，我总结了这几点，主动对健不光是推荐什么东西，怎么推荐也很重要，另外隐私保护性也很重要，每个人都有个人行为，你每次推荐都是个性化的，怎么个性化又怎么保护隐私这是一个对立的问题，在移动互联网下怎么推荐这对我们提出很多挑战。 [10:10:58]
孙国政: 最后我把这几个得奖的人的数据公布一下，也谢谢大家。 [10:12:40]
主持人: 看来我们的时间没有给够，孙老师还有大量的东西要讲，我们以后找机会让孙老师在我们杂志网站写更多这样的文章，因为相关的算法确实太重要了。我们以前学计算机的算法是没有用的，现在发现算法越来越有用，以前学的计算机结构组成好像没什么用，但是现在整个形势也发生变化了，以前我们SDCC大会讲过多核，但是现在异构起来了，它的指令集各方面硬件都不太一样，这也是我们技术员需要高度重视的东西。所以我们跟AMD合作，大家看到我们网站由异构变成一个社区。我们今天非常有幸地请到 Mike Houston AMD先生给我们做演讲，大家欢迎。 [10:14:31]
Mike Houston: 大家好，在现在这个时代当中，以前是单核时代，我们在每个处理当中都可以有提高的，但是这个时代复杂能力不够，所以之后我们就进入了多核时代。多核时代不是一个单核，它的时钟频率有一个增长极限，但是多核之后现在最多可以达到十六核处理。但是之后，我们在这个时代也遇到了一些其他问题，比如说能耗的问题，因为这个上面进行软件开发也比较困难，我们在扩展性上也遇到了瓶颈，我们没有办法在这个上面进行更多更强的软件开发。那么我们今后的路子到底是什么？ [10:18:34]
Mike Houston: 因为每一类计算机都有不同的处理器，不管是CPU还是其他的处理器结构，如果我们要看一下现在的状况，比如说图象处理、音频处理、大数据处理等等所有这些需要并行性处理，比如说JPU这样的处理器可以带来更好的表现性能，同时能耗也是更低的，所以从我们角度来看这是非常困难的问题，尤其对现在的编程人员来说，我一会儿会给大家提供这样的例子。 [10:18:40]
Mike Houston: 我们现在看一下软件，从单核角度来看，当然它有自己的一些局限性，这些软件规模非常小，所以我们看一下这个对于软件开发者来说，如果他们有很好的系统，到底怎么样的变成能编出更好的软件。如果在多核时代的话，我们提供的平台更多更宽广。比如说英特尔给我们的平台都是让各位软件编程者有更好的开发平台，从JPU角度来看会给我们编程编码上带来很多益处。但是这其实也是多核给我们带来的软件平台，提供了各种各样编程的能力，今天我们可以想象一下我们其他的软件还有硬件都是可以实现，不管是英特尔还是AMD。 [10:19:6]
Mike Houston: 这样的系统当中，都是建立在多核的基础上进行下来的。我们现在到底在什么样的状态，其实每一个设备都有自己的系统，不管电脑、平板电脑、PC等等，我们每天都有非常大数据的处理，CPU是不是已经足够来处理这些数据？所以我们是需要更多的数据处理能力，这同时可能有非常大的能量消耗损失。 [10:19:11]
Mike Houston: 比如说我们现在的编出来的程序可能有CPU上非常多能源的浪费，在开源架构当中就有关于虚拟的问题，不同的编译器之间会放在不同处理器上进行处理，有一些在比较低的层级，有些在比较高的层级，比如内存、处理器等等，所有这些都是在同样的生态系统当中共存，其实我们现在没有办法知道到底ISA对于JPU、PCU都是共同有用，其实不管软件公司还是硬件公司都要开发好的平台让我们更好地工作。 [10:19:50]
Mike Houston: 我们现在AMD、三星、ARM等一些国际著名大公司都在合作给大家提供一个很好的计算平台，大家可能觉得AMD和其他公司之间有相似性参加，是不是在行业当中产生一些带头作用？我们现在的目的是AMD想给大家带来一个前所未有的处理能力，让每一个编程人员可以更好地使用，就好像他们今天使用CPU一样简单，我们现在也在大规模把APU软件生态系统进行扩张，我们怎么有更多的服务器让大家在整个系统当中整个行业当中更好地开发。当然我也希望有更好的软件使用，不管是本地还是云的环境当中使用。 [10:20:31]
Mike Houston: APU到底是什么？这其实已经是个第二代APU，是从17―125，我们可以把CPU和JPU整合在一个晶片上，我们之后在晶片上会有更多投入，让大家更容易编程、更容易优化、更容易进行提升性能，但同时降低了能耗。2011年我们做出了第一个APU，这放在一个晶片上共享一个内存，之间通过一些物理联系，有些问题之前没办法解决，但有了这样一个晶片之后就可以解决了。所以传统商来说CPU和JPU在不同科技环境下进行优化。但是现在因为CPU可以提供很多频率的对战，所以我们觉得现在在JGU上可以支持C++，现在等待时间也会降低。APU就可以极大的增加图象的处理，现在实际上每一个系统都是有CPU的，之后通过APU的使用可以把能耗降低到80%，这就可以让我们把这些能源放在最佳的使用地方，所以在接下来几年当中我们的跨度会非常大，主要在处理器产品上。 [10:21:26]
Mike Houston: 我们会在CPU、JPU上有UT，我们现在是用开源软件还是需要使用APU让CPU有更好的编译编码能力，因为APU和CPU处理东西都在一个晶片上。如果内容大小一样，指示器性能大小一样，这个性能就会有非常大的提高，它也会提高CPU的功能。 [10:21:33]
Mike Houston: 我们现在这样大规模的投入，到底想要一个什么样的应用程序出现？其实是想让大家有一个更好的编程环境，比如说更好的编程界面、生物识别、指纹识别、多用户识别等等，这些其实都是要把云上面的处理器和设备进行融合整合，每个地方都会有不同数据程序，大家都可以在任何地方接入，所有这些都会帮助我们，比如说超高清的一些视频等等，这些都是我们现在工作的重点，包括还有视频音频的管理，还有高清视频搜索。现在人脸识别用CPU非常久了，到底为什么我们之前一直有瓶颈，就是使用不是特别充分。 [10:22:11]
Mike Houston: 如果我们用搜索窗口来看的话，我们看这个人脸，这边有一个搜索方块，把它全部拖到右边去，会有更多的显示，如果CPU使用不足的话它的分辨率就不是特别好。这个就是用不同大小、不同尺寸的来进行识别，其实是同样的算法，但是带来的效果就是不一样的。事实上，这会给我们380万个SF。 [10:22:17]
Mike Houston: 这里是HAAR集连阶段，在N阶段的时候脸部识别是可能的，但是在N+1会有P2Q几个特点，这取决于能不能做脸部识别。我们看一下这个算法是怎么算的，在最后高清计算当中搜索方块一共是400万个，每一个FACE的CONFIRMED是100，这个必须是正的，头弯一点就用不了了。我们看一下连集深度是多少，在上面可以看到具体分析，我们在这里可以看到它的情况比过去要好的。为什么会有这样一个改善，我们看一下变化。首先不同阶段的时候，正在运算的小的IDM是不工作的，这样大幅改善了有效。橘色代表JPU，绿色代表CPU，第一阶段的时候JPU是比CPU慢的多，但是最后JPU比CPU快的多，大家可以看到这样一个很大的区别。 [10:23:43]
Mike Houston: 大家可以看到APU和JPU、CPU是有区别的，所以我们有时候计算的时候只用APU。这是一个非常有意思的用法，我们可以看一下它代理的结果是什么？JPU和CPU不同阶段使用的话会造成什么影响？我们PER FRAME增加2.5倍，这是一个笔记本芯片，这样可以使电池寿命延长2.5倍，这同时给我们带来了能源消耗特别是每一个FREM能源减少。当我们改变计算方法的时候可以使机器变率变高减少能耗，如果看平板电脑或者手机的时候我们这种方法更加有效了。 [10:26:10]
Mike Houston: 现在我们也是希望能够运用JPU通过软件在其他方面进行一些改善，我们下面看一下JAVA的加速，这是用APARAPI进行JAVA的改善，首先我们有一个JAVA源，然后用标准编译器把所有源进行分类，我们用APARAPI可以帮助我们改善整个过程，当然过程当中肯定要用到LI，现在我们把这个代码放到Opencl，这个如果没有Opencl，它可以在任何一个线程池上面进行。 [10:27:4]
Mike Houston: 下面简单谈一谈软件站，我们看到驱动站和HSA工作站不同方式，我们看到驱动器站灰色部分代表应用，后面是阈值，同时所有软件应用都可以在Opencl上运作，我们可以通过软件站的方法来节约时间，我们看到这样一个变化还是非常明显的，因为在驱动站的方法应用并不能跟硬件沟通，它可以和HSA阈值沟通。HSA是一个优化了的平台架构，也是给Opencl应用的，它不是对Opencl的取代或者替代。这个好处是帮助我们减少一些不必要拷贝浪费，另外可能的调度性也会比较低。 [10:30:32]
Mike Houston: 内存模式会有改善。比如说在Opencl上有一些东西没有正在运作的话我们可以跳过它，所以说整个编程层级也是比较低的。我们这里可以看到AMD给HSA开源的工作，我们把我们的源给打开，然后帮助我们能够改善整个生态系统，另外还有单一分享的方式，我们希望我们所有的用户都可以使用到我们这样的产品。开源和Opencl都是我们做的比较多的工作，如果想要在行业当中进步的话，我们必须要跟上这些趋势，我们改善芯片、改善我们的软件也是为了这些，如果你要想生存下来的话就必须要做到跟上行业的趋势。我们也是希望和其他公司有合作伙伴关系，发展更好的软件，但是很多软件包现在在未来五年可能还没有办法达到我们的需求，当然我们现在慢慢打基础，也是希望能够做得越来越好，谢谢大家。 [10:31:1]
主持人: 感谢Mike，他刚刚讲到的主题挺重要的，大家能想象到我们这些年感觉到数据越来越多，当然互联网、社交网络、移动设备是一个很重要的原因，其实我们还有一个很重要的，并不是说数据自己产生的多，而是现实中很多数据原来我们没法儿处理或者没法儿收集，而现在，尤其是这一轮由苹果带来的触摸体验，如果下一代用户界面更多多媒体话的话的，我们面临计算处理压力更大，这仰仗硬件、软件、算法各层次不同适应创新才能应对，这是一个非常大的事情。当然我们也面临着现在有更多的平台，这类平台有互联网的平台、有新移动设备的平台、有软件的平台，当然还有电信运营商这样一个用户量极大的平台。下面我们有请中国电信创新业务事业部总经理肖金学先生，给我们介绍一下中国电信在开放平台上的设想。 [10:33:29]
肖金学: 大家上午好，今天非常开心和高兴能够参加咱们软件开发者大会，因为这种会我参加的不是太多，刚才我在底下跟蒋涛聊，我说我们原先在运营商这个口，或者说在一些管理层面上的会参加比较多。那么今天我没想到这么多人，而且是这么多有志向的年轻开发者，从我们运营商来讲，大家都知道移动互联网发生了巨大的变化，有人说下个十年是移动互联网时代，那么作为运营商来讲怎么样能够在这个时代当中发挥我们自己的作用？而且我们是怎么样思考的？我想跟在座的同仁进行一些交流。 [10:38:32]
肖金学: 首先想跟大家一块儿交流一下，作为我们中国电信啊对一堆互联网是怎么一个认识，我们看看这张PPT，从去年开始我们感觉移动互联网处于一个爆发的阶段，当然它爆发的前提是什么？我们觉得一个是3G网络的布局，中国电信、中国移动、中国联通。第二是芯片技术的进步，第三终端款式的发展，现在3G终端款式，光C网已经突破了1500多种；还有一个我们感觉就是广大的开发者的参与。我们看一下，中国电信现在3G用户已经是5400万了，这在任何一个国家来讲的话都相当于一个国家的用户数，这还不包括中国移动和中国联通的数字，仅仅五千多万基础之上，个人认为就有很多市场和应用可以挖掘。 [10:38:50]
肖金学: 现在我们总共用户是1.5亿，这个数据很有意思，因为中国电信真正从事移动的3G也就是08、09年，但是真正从事移动我们前十多年以前了，因为中国移动本身就是中国电信过去一个移动通信局分出去的，现在形成了一个巨人。当然由于国家产业政策，08年才让中国电信经营移动业务，我们在短短的四年多时间发展很快的，当时我们从联通买了一个C网，当时接收过来用户2700万，到现在1.5个亿了，到明年估计就到了2个亿了，现在主要发展是3G用户数。现在来看的话，这是三家运营商在百度发布的移动互联网报告，中国电信移动互联网用户PV增长和占比发展速度是非常迅速的，现在我们已经处于第二位置。移动虽然处于第一，但是现在也在进行结构调整。 [10:39:23]
肖金学: 还有一个数据，可能是在座的各位也比较关心的，就是3G上网流量。现在中国电信从网络层面来看，中国电信3G上网流量已经是2.6万TB，户均流量是92兆，当然我这个是真正实实在在可以收到钱的，不像有些把上网卡还算上去，上网卡不应该是手机上网流量。还有一些其它的因素，比如我这个是加整个3G用户包括沉默用户，有些运营商只算活跃用户，我们感觉怎么样有更好的运用，把一些低流量和沉默用户挖掘出来，这也给在座的一种机会，我们现在很多应用怎么能够满足消费者的需求。我们现在发现智能终端的发展，特别是应用开发对手机流量影响非常大，毫无疑问iPhone的手机上网流量每月户均600兆，所以大家开发出应用在iPhone适当收费你就可以赚到钱。 [10:41:44]
肖金学: 还一个就是校园年轻人现在是新的消费主体，还有一个群体是很多城市的新市民，他们在八个小时以外更好地生活，这也带来很多机会。那么这个过程当中我们感觉三家运营商现在在做一个很的事实，就是我们大力推动千元智能机，因为iPhone逼近太贵，最近iPhone5要出来要六七千、八九千，这是一般消费者很难消费起的，那么千元智能机的发展是一般消费者都可以消费的起的，现在活跃率达到82%。我们也发现手机上手机游戏、手机阅读、手机视频音乐都在上涨。 [10:42:59]
肖金学: 在移动互联网方面，我们作为运营商来讲，我们董事长在进行整个集团战略定位的时候提出了“新三者”，一个是智能管道的主导者，毫无疑问，作为我们运营商一定要把管道做好让我们好的业务畅通无阻。当然一定要是智能的，不能是毫无价值的东西损害管道的价值。因为它跟有线网络不一样，因为无线网络毕竟是有限的。我们想在综合平台上提供，现在时髦说法是汇聚，现在腾讯、百度都在搞平台。我们感觉为了更加了解用户，在内容和应用方面我们也做一些尝试，在做尝试当中，我们现在归口管理，现在有八大基地，实事求是说应该是十大基地，另外还有一个号码百事通，我们现在还弄了一个创投叫孵化基地。目前来看，我们自身基地UV量是6.5亿。2012年光我们自己这些基地访问用户3.5亿户。 [10:43:30]
肖金学: 以上就是我们对移动互联网的一些认识，跟大家一块儿分享。总得来讲，我们感觉到在下个十年当中谁掌控了或进入到移动互联网，那么谁在未来发展当中就争取了主动。那么有人就说，好像软件开发者大会运营商来参加的不是太多，因为我感觉从整个产业生态价值链当中有终端设备、运营商、SP、CP、软件开发商等等，那么我们为什么要参加这个会？刚才我跟蒋涛也在沟通，我们想注入一种新的思维、注入一种新的理念，是什么呢？想跟大家一块儿分享一下，就在大家开发的过程当中，或者说你们在成长的过程当中，我们运营商能够为得到支撑什么、支持什么？我的同事说这个会肖总你一定要参加，大家要见面，正好我们在这两天当中还有我们一个专场，把天翼能力平台开放，跟大家介绍。这个也是要花钱的，蒋涛说花钱也是值得的，我一看这么多人，可能也是值得的。 [10:45:58]
肖金学: 我们到底能干些什么，我觉得在座的同志可能针对我们运营商真正近距离的接触不是太多，可能你们从生活当中用了我们的手机交费，但是我们背后到底有什么东西，我跟大家介绍一下，一个我们愿意给大家提供开发服务，就是刚才介绍的，我们现在也搞了一个天翼能力平台开放，现在在互联网上我也知道有一百多家平台。我们这个平台是什么？基于我通信能力的一些平台，包括我的支付能力，因为我知道大家现在最犯愁的是你开发出好东西收不到钱。真正能收到钱，而且钱收的可靠的，我觉得运营商还是最可信赖的，因为我值得在最早第一批移动互联网时代，那个时候我跟腾讯和其他网站都交流过，其实第一代互联网发展起来是通过运营商代收费平台。那么在移动互联网时代，我们也愿意把这个能力给开发出来，包括我们的定位等等，这是一个。 [10:49:56]
肖金学: 第二是营销推广，刚才我听说大家以前在开发当中都知道，你开发出一个很好的东西怎么推广，其实现在渠道推广费用越来越高，现在我们也愿意提供推广渠道，包括我们的天翼空间，甚至我的短彩信的能力等等。运营支撑，包括云计算、云备份、云存储等等方面都可以陆续进行支撑。还有一个是创业服务，我们中国电信在上海信息园，估计今年、明年、后年在北京、广州有孵化基地，也愿意为广大开发者提供一定的支撑。 [10:50:9]
肖金学: 这是天翼平台开放，天翼帐号能力、电信特色能力、数字内容能力、综合信息能力，我的信息都可以通过API包装为开发者提供服务，这些内容我们合作处将会给大家介绍，大家如果比较关注open.189.cn是我们的网站。我们的API平台今年4月份开发，到明年要400多个，合作伙伴600家，目前来讲调用总数短短时间突破了1400万余次，但这个量还是太小，但是小的原因是大家不太知道，其实大家可以尝试，这是一个好东西，已上线应用有99个。 [10:58:31]
肖金学: 我们在具体开发过程当中有一些合作伙伴，总的来讲我们总体设想定位，天翼开放平台全力协助合作伙伴，让大家发财，我们也不以盈利为目的。天翼空间的营销推广，目前来讲商店的事有将近12万款，运营商中我们排在前列。月下载量2000万次，这跟腾讯、百度相比还是太少，所以我们天翼空间总经理也说你在开发者大会上也介绍介绍，上去试一试也不错。还一个云计算平台，我们现在云计算公司已经成立了，这个是我们运营商一个很大的优势资源，而恰恰这个事应该说从基础的IDC包括云存储方面，应该是我们本职工作。在这个过程当中，我们主要一个是IDC托管，云主机、云游戏、云桌面等等都在拓展，我们内蒙现在有两千亩地，在内蒙云数据中心成本最高的是电，而内蒙一个是有煤，还一个是冬天温度，所以我想我们会通过降低这些成本来不断地把云计算产品成本再降低。 [10:58:39]
肖金学: 这是我们的产业生态价值链，云计算公司在组建，我们也是开放的心态，从国外引进了顶尖的专家，是由我们谢博士运作这个公司。我们整个的设想首先是裸机然后主机和云化资源，前十年云的概念已经有了，只不过今天现在什么云都有了，我感觉关键是怎么样能把计算能力和存储能力运作好。我们响应国家的创新型国家口号的提出，作为企业我们成立了天翼创投公司，第一期主要是内部孵化，因为全国毕竟有几十万员工，也有很多很好的创意。第一期孵化，从380多个项目当中选了14个，现在孵化四五个月了，有些项目还是不错的。 [10:58:57]
肖金学: 昨天我们还有一个项目，我记得我们项目的钟清风应该参加这个会了，他的是来电情景，大家开发出一个产品，你在打电话过程当中原先你听的总是铃音或者忙音或者振动音，现在他们把回铃音变成了一种更加人性化的东西，也满足人们的一些需求，他们也就四个人。现在这个产品在应用商店下载也突破了10万次，而且还没有正式下载。那么我们就想把我们电信内部这些富有创业激情的，而且是有理想趁着年轻想干事的，我们提供一个舞台。我那儿还有一个项目，是陕西榆林一个县电讯公司，叫小黑哥，解决煤炭运输过程当中的信息沟通。已经做了第一期，第二期现在报上来将近四百个项目，外部项目一百多个，今年四季度进一步孵化，明年会是更大的范围，大家有兴趣也可以关注一下我们。 [10:59:12]
肖金学: 天翼创投公司主要目的打造电信优势化服务机，一个是吸引外部拉动产业链的投入，还一个客户资源，我们愿意在孵化过程当中把强大的孵化资源和渠道都以一定市场化方式进行体规，以及我们网络通道，包括对接国家半夜政策，总的来讲有运营商特色的差异化投入，我们还有一个联盟，我们希望我们这个联盟是整个产业价值链的，包括运营商、互联网企业、终端设备、软件等等，我们均一打造多环节大家共聚一堂的生态价值链。 [10:59:41]
肖金学: 以前我给大家介绍一下我们的一些工作，可能我介绍的未必是大家感兴趣的，刚才听了腾讯首席科学家和AMD的介绍，他们都非常专业和技术，我十年之前还搞一搞技术，但是我今天希望介绍的让大家了解运营商做什么，我们有哪些东西助力大家实现梦想，谢谢大家。 [10:59:48]
主持人: 主持人：感谢肖总，其实我们听了肖总的演讲，虽然天翼和我们是很长时间合作伙伴，很钦佩运营商已经作了这么多工作，整个圈子内觉得腾讯很牛，但是运营商更牛，都是几亿用户，而且这些人每个月交钱比腾讯要多，运营商有资源优势、政策优势等等，我相信天翼这样的思路清晰运作完整的平台还是很大的潜力，有很多的机遇等待着大家。接下来我们有请盛大集团CEO技术顾问潘爱民老师给我们讲讲系统平台。 [11:7:21]
潘爱民: 大家上午好，今天我讲的是我这几年的一些体会和积累，我把它定义成这是人人写应用的系统平台。我们都知道Windows这二十年来使用最广泛，所以这个应用生态系统到目前为止无论从用户链还是应用数量还是Windows平台上开发者人群都是迄今为止规模最大的。Windows平台提供的C借口是面向专业人士的，也提供了VB接口和Dephi，也可以说Windows到目前为止是最活跃规模最大的应用生态系统。同时Lieux生态系统不像Windows这么普及和通用，他的C接口更多面向学院派和专业人士，也提供了各种脚本和编译工具和专业软件开发。最近几年来比较活跃的就是移动应用生态系统，一个是iOS应用平台和Android平台，他们两个用户数和Apple数据相当。开发人员数量，iOS相对小众一点，现在有百万量级开发者。而Android采用的是JAVA开发语言和平台，所以相对来讲是移动开发者里边最大的群体了。 [11:10:9]
潘爱民: Web早期刚开始出来的时候是作为一个单纯图形化信息呈现的标准和手段，这是早期Web的用途，但是在接下来将近二十年的时间里面实际上从页面呈现往应用化的努力，但是这部分努力是往浏览器推动的。JAVA Applet提供监管区域，使页面更加丰富精美，对用户交互有更好的响应。微软浏览器提供了更强大的往应用化方向的支撑技术，HJAX可以在页面用户交互的时候获取动态的内容，这些都扩展了Web页面表现形式。到后期，Flash大行其道，它变成了现在浏览器重要的应用运行平台了，过去这些努力基本通过浏览器插件或者浏览器的扩展做到不仅仅是一个页面的呈现，而是能够跟用户交互，可以由更丰富的内容，这都是浏览器上的。从2004―2007年，W3C标准化组织把页面往应用化方向走，从Web角度讲是在走一个原生路线，不再是通过浏览器往应用化走，而是直接把Web标准往应用化带动，这是我们现在所熟知的HTML5，在HTML作为网页应用标准上形成Web标准，把HTML变成应用平台。这个有的是渐近的，变得更好，这加入了更多的样式能力。 [11:10:45]
潘爱民: 过去在页面有多媒体内容都是通过插件的形式，现在变成让浏览器直接原生支持，加入更加精细绘制能力，同时一个很重要的内容是对Web应用底层的支持，包括对于底层设备访问、底层存储访问，和页面之间通讯都是新加入进来的，就把页面标准变成应用标准的方向。从Web页面到Web应用转化过程当中，我们看Web页面是单纯展示信息，看页面效果，布局字体颜色等等效果好。它对交互相对来讲不是很看重，应用逻辑相对比较简单，纯粹是把客户端当做一个页面呈现的手段。所以浏览器的核心实际上就称为一个页面布局的引擎。到了Web应用要求就更高了，要求在功能上可以满足各种应用需要，因为有些应用可能需要有持续存储能力，有的可能需要访问底层设备信息，比如系统信息，所以这在功能上要求更高了，然后在性能上同样也要求更高，因为通常把应用就跟原生应用相提并论。目前这种情况下，性能上还有差距，所以现在更多倾向于原生应用。 [11:14:24]
潘爱民: Web也带来一些相应的变化，Web对底层系统要求，还有对后台任务的需求、对客户端应用逻辑变得更加复杂，同时要求离线体验，尤其在移动互联网的时候，有时候会在离线情况下。所以Web应用实际上可以很简单，比如简单到仅仅一个图片，这也可以叫一个Web应用，这个就是从传统延伸过来的，它也可以是一段相对比较简单的让用户简单交互过程，也可以很复杂，比如跟服务端或者多方协同或者本地有强大的编辑能力，这些都是Web应用。将来有的人层次会比较浅显，满足于一些简单的呈现效果就可以了，但是有的人比较专业，比如强交互性或者服务器端有大量支持的应用，所以Web应用从简单到复杂，可以有各种各样的形式。 [11:15:59]
潘爱民: 从一个Web页面到Web应用，在现在这个新的时代在实现Web应用的时候刑形势怎么样，首先Web页面应用化，如果所有应用逻辑包含在一个页面内部，你这中相当于比较直接，以前大量Web人员移植过来就可以写Web应用。也有可能是多个页面，一个Web应用逻辑很复杂，实际包含了很多个HTML的页面，这种情况下，因为Web本身这种模型页面之间有很强的独立性的，所以跨页面逻辑在具体平台上，比如浏览器里边是由浏览器掌握，所以可控性差一点。如果你的界面很丰富，这里边可能会涉及到一些不同的试图，还有些控件，这往往会通过一个框架管理。我有一个HTML和JAVA的分类，一种是用HTML来表述，再加上一些简单的JavaScript，真正应用逻辑可多可少。另外一种模型是静态内容用HTML处理，另外动态的是用JavaScript。还有一种情况完全不用HTML，所有页面功能都用Jova Script来处理。 [11:19:1]
潘爱民: 刚才讲的是Web应用类型和可能模型，到一个具体运行平台上，一个Web应用底下一定有两个引擎，一个渲染引擎，再之后有一个图形系统和操作系统内核部分。所以一个Web应用是一个独立原生应用，它虽然是一个Web应用，但是对于整个系统而言就是一个应用，所以这种情况下就变成了一个把Web包装成原生应用。 [11:19:19]
潘爱民: 另外一种情况是把引擎包装在浏览器环境里边，在浏览器环境里边运动，这有一个应用管理，因为浏览器支持多应用，比如现在浏览器支持PC应用，这是典型的倡导的方式。另外极端方式是整个操作系统就是一个Web运行环境，这样变成了WebOS的情况。盛大现在在做这样的操作系统环境，完全是在Web环境，这样上面就变成Web应用平台，这种Web应用跟传统应用相比有些好处，传统应用可以把Web打包上传到某个中心质点，除了这种以下载安装软化软件分发方式以外还有灵活的分享方式。一种方案是如果你设计了精美的Web应用，你可以马上分享，或给你想给他看的人，这是很方便的一种分享方式了。另外一种可以利用云端的力量，可以把一个Web应用上传到云端，你从云端拿上一个URL，它代表了任何人都可以访问的Web应用连接，这种方式在未来是更加有优势。就是说一方面利用云端的力量，另外一面可以很便捷的让一个应用发布到一个人群当中。所以Web分发方式有它比满的优势。 [11:22:40]
潘爱民: 但是Web应用技术上已经有很多的积累，尤其现在移动互联网时代，大家都比较看好，可是仍然有很多挑战，我这边列了三个方面，分别是内容方面、性能方面和工具链方面。从内容方面来说Web页面可以变成Web应用，但是实际上并不是所有Web页面都可以构成一个合适Web应用，可能只有极少数，但是Web页面数量确实非常庞大，到现在是几十亿上百亿量级上，所以哪怕很小的比例也有很多的资源。一个Web如果真正变成商业平台的话还是要形成商业生态系统，这涉及到开发者、平台运营商、用户要构建起这个生态系统。Chome Store也是Google推出的一个Web应用市场。 [11:23:5]
潘爱民: 对于开发者来说现在有几个关键问题，一个是技术性我们不多讲，另外一个是传统的分发方式，你写了代码到某个客户端运行是直接得到铭文，这对于开发者相当于不保护的。互联网时代解决方案是你把知识产权的东西都放到服务器端，所以客户端是无关紧要的逻辑，这是一种办法。但是在移动互联网时代，尤其变成移动Web以后，这个要求更加严重，你的客户端必须有这个逻辑，如果还是JavaScript方式的话，这个保护力度是很弱的，这是对内容方面需要一些基础技术来保护。 [11:25:5]
潘爱民: 第二个挑战的问题是性能平静，在现代移动设备上目前来看还是很严峻的，Web应用它的软件在，中间是原生应用，中间是Javo Eegine的应用Natie的应用。每当有一个Java scritt都会访问到DOM元素，这样的话它能不能利用底层图形系统页面加速的能力或者图形系统专门定制功能就不一定了，这就造成了一个用户事件到反映出事件逻辑变化过程中的开销比原生应用和Egine要差很多。从这个来讲，最有优势能把这部分做好的是谁？一定是操作系统厂商，所以操作系统厂商做的浏览器一定会在性能上比其他的更有优势，因为他可以做一些专门的图形系统，专门做一些定制给浏览器提供一些功能。所以你要想让一个Web浏览器或者Web应用运行平台，要想做的好的话，一个是在渲染引擎上下工夫，另外跟操作系统结合一定要很轻很薄。 [11:27:5]
潘爱民: 第三个挑战的问题就是工具链，虽然过去经过了20年Web的发展，到现在开发模式也没有变化，依然是HTML+CSS+JavaScript，调试支持很多，如果让Web应用普及到更多人开发的话还需要有一些模板和辅助的工具。 [11:27:12]
潘爱民: 我们现在已经可以看到很多HTML应用利用了新的Web应用，很好地展示Web新特效效果的例子，经典游戏现在很多都有Web的版本，所以HTML新特性引用过程是早就开始了，而且是一直在渐进的变化的。 [11:28:13]
潘爱民: Web应用平台虽然有前面讲的这些挑战，但是还是有很大的优势，在过去20年有大量内容积累，即使原来有很小的一部分，但是基数很大，所以对现在来讲是很有价值的。已经形成了开发者群体，整个产业界都在为Web平台做努力，包括浏览器厂商和操作系统厂商。Web最大的优势是开发者的努力可以以最灵活的方式最快捷的方式达到用户，我觉得Web在现在来看，我认为是将来能够超过iAS和Android的应用最大的一个机会。 [11:28:42]
主持人: 我们看网页技术发展，有一些特殊客户端总是存在的，因为他对性能要求很高，大部分应用后来慢慢转到互联网上去了，所以我相信手机以后也会走这样的路，这样的话下一步对硬件会更加开发，因为完全在硬件或者操作系统优势的厂商会丧失这种优势，所以我也很愿意Web能够展开它更多的机会。早上蒋总转发微博说任正飞在华为内部的一条讲话，我觉得任总是我比较佩服的技术高管，这么多年华为发展到现在的世界级企业有它独到的地方，讲话中提到的华为实验室我都不知道，我们接下来有请华为的诺亚方舟实验室的李航，这个名字是任总亲自起的，因为他觉得数据的洪水要来了，所以要打造一个诺亚方舟。我们有请李航博士给我们做机器学习新动向的演讲。 [11:34:59]
李航: 大家上午好，非常高兴有这样的机会跟大家一起交流，我是第一次参加这个会议，自己主要是做研究的，研究的方向是自然源处理信息检索信息挖掘，跟孙博士还有一些同仁都是做同一个领域的相关工作。 [11:36:19]
李航: 我今天跟大家一起分享一下我最近观察到的和感触到的机器学习的新动向，从人机交互中获取数据使得我们学习更有效，能够构建起更加智能的系统。我们大家都同意，智能化是计算机科学发展的必然趋势，让我们计算机越来越智能，这个过程当中我们必然希望有一个非常强有力的手段，到目前为止，人工智能其他领域研究，我们发现最有力的手段可能还是要基于数据，通过机器学习这样的办法才能够使得我们的机器更加智能化。我写了一篇博文叫做《机器学习正在改变我们的工作与生活》，里面介绍了为什么智能化必然是基于大规模数据的，必然是统计机器学习驱动的。在这里做一个广告，今年出了一本书是介绍统计学习方法，写这个书目的之一是希望软件开发者很快掌握这些方法，很快构建智能化的系统。 [11:36:28]
李航: 为什么机器学习需要大量数据，到底有多少数据才是足够的数据，我们再看一下机器学习新动向，怎么样通过跟人机交互能够获得更多数据，这个包括日志数据挖掘、重包，还有对进比较热门的人机协同计算。最后我想介绍一下有了大量数据以后怎么样能够使用这些数据，构建一个非常智能化的系统，使得我们这个系统更加智能。 [11:37:3]
李航: 大家知道统计机器学习是基于数据的，最重要的一个环节就是收集采集数据，高质量的大规模的数据能够帮助我们构建出一个非常智能化的系统。有一个非常朴素的问题，到底有多少数据才能够足够帮助我们去构建一个智能化的系统，这是一个非常重要的问题。 [11:39:9]
李航: 在机器学习里面有很多研究，比如说在统计机器学习理论里面一个重要的研究课题就是所谓的样本复杂度，到底我要多少样本要多少训练数据，才能够很好地学一个模型。这个问题是一个非常难的问题，虽然从事的研究很多，但是有的时候并不很容易就能够很好地回答这个问题。比如说我们要构建一个二类分类器，这是机器学习里最基本的模型，判断一个图片是不是含有人脸，就是所谓人脸检测问题，这就需要通过构建二类分类器去完成。对于这个问题有一个理论定理叫欧卡姆剃须刀，它的结论是学一个二类分类器的时候需要样本容量、样本数目是跟要求学习的精度有关。我们希望学习精度越高需要的样本也就越多，同时跟学习模型复杂度也有关，模型如果非常复杂的话学习的样本也非常多。 [11:39:19]
李航: 这个结论是什么呢？样本的数目是用S集合容量来表示的话，它至少要大于这样一个量，这个量其实跟我们要求的模型的精度、和我们做判断时候的确信度，我们希望判断是非常有确信度的。比如说我们要学一个二类分类器，里面模型复杂度是100，根据定理我们可以看出5万以上训练数据才能学好这样一个分类器。这是一个非常大的量，我们需要大量的数据才能完成这个任务。 [11:39:38]
李航: 一般经验上来说，我们学习的时候假设要学习的模型有K个参数，参数个数一般表示模型复杂度，经验上至少模型参数数百倍训练样本才能够大概把模型学得比较好。我们现在应用往往都是非常的复杂、需要做的事情都是非常智能化，这个时候模型参数个数是非常大的，有时候都是上百万量级的模型参数，如果上面再加上几百倍量的样本，我们要很好地学习一个模型的话，在机器学习里面需要大量的学习样本。这个学习样本并不是我们随便搜集一些简单数据就能够用来学习，通常我们要做什么事情呢？比如说我们在人脸检测里面，看到一个数码相机拍的照片有没有人脸，这个是大家花钱雇佣很多专业人员用人工办法标注照片，在不同光线条件下、不同的像素条件下和不同年龄、种族、性别的人在照片里出现的时候，到底有没有人脸，要标注大量这样的数据，通过大量数据的标注能够采集出真正能够覆盖各种情况的数据，这个时候我们才能够非常有效地学习我们的人脸检测的模型。 [11:42:37]
李航: 所以现实当中，我们需要非常多的高质量的数据来帮助我们去构建智能化的系统。这时候就给我们一个很大的挑战，我们到底怎么样才能够采集到这么大高质量数据？机器学习里有一个新的趋势，就是通过跟人机的交互，我们希望交互过程当中采集大量高质量数据，这变成了机器学习领域里的一个非常值得大家关注的新的动向。 [11:42:40]
李航: 我们希望通过人机交互用各种巧妙的办法采集到数据，有日志数据挖掘、众包、人机协同计算等方法被提出，现在在研究领域也是热门研究话题，就是怎么样能够构建出更好的机制，有效地从用户那里采集到大量高质量机器学习的训练数据。在互联网搜索引擎里边，搜索引擎一定会记录下所有日志，比如一个用户提交了查询，系统会返回一组URL，用户点击URL的过程被记录在搜索引擎里边作为日志数据。这个数据是非常有用的，对帮助提高搜索引擎相关排序是非常有帮助的，等于说我们每天有上亿用户使用搜索引擎，提交的查询也都是更大数量级的查询，不同用户提交不同查询，之后点击了不同URL，我们把这个收集起来可以从用户那里得到就是到底用户需要从搜索引擎得到什么样的信息，这样大量的查询对搜索引擎质量和相关排序质量提高非常有关。 [11:47:24]
李航: 这种所谓的数据挖掘在搜索引擎里面应用非常普遍，在其他不同应用里边大家也在尝试着采集各种不同日志数据，能够帮助提高相关应用。一般用户在使用过程当中自己不会花更多的代价做什么事，他只是更多地使用应用，但是我们把用户使用过程很好地记录下来，把这些数据拿回来作为用户的反馈，这是一种隐式的反馈，用这种反馈数据帮助我们提高现在的应用，这个思想是非常合理很自然的想法。如果这个系统本身是基于机器学习的话，一般来说能够很好地利用日志数据帮助我们提高应用各方面的性能。当然用户行为数据往往是比较含噪音的，怎么样去除噪音，提高日志数据的质量是我们需要考虑的问题。 [11:47:34]
李航: 再一个例子，大家可能也都知道Amazon Mechanical Turk，我如果是一个想标注数据的人，我就把这个标注任务需求放在市场上，市场里有很多注册会员，他们就是所谓的员工，如果这些员工可以看到提供的各种各样标注的任务，根据自己的兴趣、喜好、能力选择感兴趣的任务进行标注，通过标注可以得到一些报酬，有些人把这个当时自己业余获得收入的办法。也有一些人把这个当做一种娱乐或者学习的过程，或者消磨时间的过程，这个是非常火爆。在Amazon Mechanical Turk上常驻注册工人上百万，每天成交大量标注工作，所谓标注包含各种，比如说图片里边的标注，人脸检测就可以成为Amazon Mechanical Turk里边一个标注任务，给工人大量图片让工人判断图片里是不是含有人脸，这个工作对人来说往往简单，可能几秒钟就标注一个。但是让机器来判断的话往往是非常难的，如果大量工人帮助标注大量图片数据可以帮助我们很快地构建一个智能系统，这个方法是用所谓的众包确实能够有效地帮助智能系统开发者收集大量的数据，往往以很小的代价就能达到我们的目的。 [11:47:46]
李航: 互联网的这样一个环境给我们提供了这样一个可能性，我们能够有这样一个市场，在这个市场上能够很快地募集到合适的工人帮助我们完成这些标注工作，这就是众包的特点，这就是以Amazon Mechanical Turk为代表的平台能够把对标注工作有需求的人联系在一起，给大家提供这样一个平台，大家可以在这上面进行各种各样的标注工作。 [11:48:44]
李航: 还有一种办法是通过游戏的办法来采集数据，有目的地做游戏，一个有名的游戏叫ESP，两个玩者，给他们同时展示一个图片，让他俩同时对图片做标注，如果他俩标注的关健词或者标记一致的话他俩都得分，如果不一致就都不得分。这样的话，这两个玩者都希望把图片标记标的非常准确，这样才能得分。根据我们一般的常识，两个人一定会尝试着尽量找合适的常识性的标记把标签标在图片上。在图片上标志的标记就可以用来机器学习的算法，Google做图片搜索的时候就是使用了这样的方法。 [11:51:58]
李航: 还一个例子是ReCAPTCHA，我们在登陆网站的时候常常让我们输入验证码，很多网站采用了这个ReCAPTCHA系统，给我们提供两段验证码需要输入，用户不一定知道其中一个单词真正是验证码，是计算机故意把它做一些图形变换，让机器识别不出来人能看出来，人敲出这个词使得机器鉴别当前用户是人还是机器。还有一部分是ReCAPTCHA这个系统找到一些OCR识别不出来的，因为OCR处理过程当中比较难处理的处，在ReCAPTCHA系统里边会当成验证码的另外一部分，也让用户输入进去，用户输入两部分验证码。这时候第二部分等于是帮助我们提高OCR系统，用户给我们提供了大量的OCR训练数据，整个可以帮助我们把过去的图书变成数字化，大量用户在网上间接地参加了参与了数据化的工作，也帮助我们提高OCR准确率。 [11:56:17]
李航: 刚才说的ReCAPTCHA和ESP游戏，Luis VON Ahn是这个时代非常接触的科学家，提出了很多有意思的方法，他把这些概念进一步升华，提出了Human Computation，我们可以把人当成一个个计算机，现在世界上两种计算机，一种机器计算机一种人肉计算机，这两种计算机各有所长，我们应该两者做各自擅长的东西，然后两者协同计算，互相取长补短，使得我们能够更好地完成很多任务，这是所谓人机协同计算的主要想法。 [11:56:29]
李航: 有三种方式帮助我们采集数据，一种数据挖掘、一种众包、一种人机协同计算。日志数据挖掘用户没有感觉到自己奉献了数据，他就是使用，这个过程中给系统提供数据帮助系统提高。在众包和人机协同计算里边用户意识到我自己在参与，更多地是得到经济上的报酬，另一个得到其他的一些满足或者是参加游戏或者做一些其它的事情，这能够帮助系统越来越改善，给系统提供更多有用数据。 [11:57:27]
李航: 我们现在有各种各样的方法帮助我们采集大量的高质量的有用的数据，有了这样的数据真的能帮助我们做很多事情吗？答案是真的，如果我们很好地设计我们数据采集的方法，很好地设计我们机器学习的方法，我们真的能够很好地把这两者结合起来很好地构建我们的智能系统。我给大家一个例子，这是我以前在微软亚洲研究院做的一个工作，那时候我们在做互联网搜索项目，希望通过采集大量用户搜索中的日志数据点击数据帮助我们学习搜索时候的排序模型或者关联模型。要解决的问题是在搜索过程当中用户的查询和网页内容上语意上应该匹配，但是词面上往往不一定匹配，这个时候搜索引擎还是基于关健词匹配做网页相关排序。比如说用户查询SDCC，网页写中国软件开发者大会，语意上关联，但是词面上一个是英文一个是中文，这之间也有不匹配的问题。搜索中希望解决的问题是自动学一些相关模型，把查询和网页之间匹配关系在语意上匹配多少计算出来，这是我们要做的事情。 [11:58:2]
李航: 我们有这个想法就是通过大量用户点击数据来完成学习任务，在搜索引擎里面可以采集到大量的点击数据，我们其实可以认为这个问题是这样一个问题，我们有两个空间，一个是查询的空间，有很多查询数据表示在这个空间里边，还有一个网页文本空间，网页空间和文本空间有相似度，它在各自空间里边能够计算，比如说我们就算两个查询到底单词有多大，这个时候可以用距离来算两个查询相似度。文本也是一样，可以把文本表示两个向量，判断两个文本相似度。 [12:2:48]
李航: 文本也是一样，可以把文本表示两个向量，判断两个文本相似度。现在一个非常有价值的数据是什么？我们通过日志里面收集到的点击数据，我们把两者联系起来，查询Q1和文本D2，我们看到数据关联起来了，我们知道Q1和D2之间是关联的，我们通过这个给定的数据希望学习一个模型，把所有这些查询和文本都映射到一个新的空间里。新的空间希望能够自动寻找一个相关度函数，或者距离或者相似度，新空间里给你任何一个查询能找到跟他相似的文本，给我一个文本也能找到相似的查询，本利是一指数据，在新空间变成同样的处理。我们需要学的是这种映射，有了点击数据就应该能够很好地判断查询和文本之间的相关关系。 [14:1:4]
李航: 这个方法其实包含了传统的信息检索里面的最基本模型，比如说VSM，这些模型不需要自动学习这两个映射，它相当于人工定义的两个映射，而且是相当简单的模型，传统信息检索模型都是简单模型，我们想做的是更一般的模型，动作数据驱动的方法自动学习比传统信息模型更加有效更一般的模型。大家可以大概想象到，我们通过这样的学习其实可以学习到一指数据之间的批准，通过这样的学习虽然字面上两者匹配并不是很好，语意匹配，我们通过学习可以了解到两个词是很相关的。结果通过这样的点击数据里面学到这种模型，就比传统的BM25这些模型都做的更好。 [14:1:18]
李航: 这个方法还可以做其他的事情，比如我们今天看到的图形图片标注，假设有很多图片很多人做标记，这也是两种不同数据，一个是文字一个是图片。这个图片被标了hook，这个被标记了fishing，在文字空间有文字相似度，图片空间有图片相似度，我们知道它们两个之间的关系，我们可以按照刚才说学习方法把图片文字都映射到新的空间里，按照语意进的就应该进，跟hook和fishing同样的都变得比较近，这样我们真正把一指数据相似度学好。我们可以把这个规模做的非常大，图片是可以做到滨临级的量级，我们其实没有学任何的语意或者图片内容，但是就是因为有了这样大量的数据我们就可以真正把图片里面的内容学出来，通过我们这样大量有标记数据把这个东西学出来了。 [14:1:29]
李航: 在机器学习里面到底我们学习多少数据，我们一个结论是需要很多数据的，即使我们仅仅是学一个二类分类器可能都需要成千上万的标注数据，这给了我们一个很大的挑战，怎么样解决这个挑战，在机器学习里面最近有一些新的动向，包括日志数据挖掘、众包、人机协同计算，我们希望能够很巧妙地设计出各式各样的机制，能够从用户那里得到大量高质量的数据。我们看到有了这样大规模高质量的数据我们真的可以用在互联网搜索或者图片标注上。其实这里面最主要解决的问题是什么？首先是我们要想一些非常巧妙的机制，比如说有ESP等等机制，这个机制如果设置的很巧妙，用户就很容易参与到数据采集过程当中来。 [14:1:39]
李航: 比如说ESP就是给用户提供游戏机制，让用户自愿参与进来，同时由于游戏设置非常巧妙，用户被诱导到提供数据当中来，他需要提供很好的标记才能得分，有这样一个巧妙的设计就能够促使用户提供大量高质量数据。怎么样找到很多的用户能够帮助我们去做这种数据描述工作是我们要想的。如果数据质量非常差让机器学的话，机器一定学习不好的，所以怎么样保证数据质量非常高同时对我们又有用，我们希望有一个非常巧妙的设计满足我们这样的条件，使得我们得到大量高质量的数据。有了这些数据以后要考虑怎么样构建积极学习方法处理大量数据，真正构建高性能的模型，这样的话才能够达到我们的目标，使得系统变得更加智能化。 [14:1:49]
李航: 最后感谢我现在的同事诺亚方舟实验室的杨强主任，很多方法是跟他讨论当中得到的，还有我们的很多实习生做的搜索工作，再次感谢大会组委会提供这样一个机会跟大家交流，谢谢。 [14:1:58]
主持人: 谢谢李航的演讲，他提到了要算法就要有数据，而且是高质量数据，数据怎么获得？要通过人机交互，这可能是很有效的方法。怎么样用户愿意给你提供数据还是很好的数据这需要有产品的想法，所以我们今天上午最后一场演讲请到了产品管理有金山网络CEO傅盛给我们演讲。 [14:2:20]
傅盛: 现场用iPhone的举手，用Android的呢？我的话题从手机开始，我大概在07年让朋友带过来，那时候还不支持中文短信，我觉得这机器真酷，但是后来我就发现有个问题。中间底下只有一个圆的按纽，我就觉得为什么这么大的空间里面只有一个按纽，为什么没有拨号键、挂断键，我觉得极其不方便。而且两边留这么多空白，为什么？我一直觉得这个设计比较糟糕，后来一直到有一天在青藏高原，我带不到两岁的女儿到拉萨，我每天拿iPhone给她放动画片，然后有一天她就拿着iPhone放动画片，而且动画片不在第一屏，在第二屏，找到她要看的。有时候滑错了滑到第四屏，他不会返回，按了一下home键，每次按错了就按home键，他总是能找到他想看的动画片。这个强烈的刺激了我，这个键让你找到最认识的场景，然后从那里开始起步，这让一个不满两岁的小女孩都知道怎么用这个手机，这就是极其简单而且牛的设计。 [14:2:44]
傅盛: 现场用iPhone的举手，用Android的呢？我的话题从手机开始，我大概在07年让朋友带过来，那时候还不支持中文短信，我觉得这机器真酷，但是后来我就发现有个问题。中间底下只有一个圆的按纽，我就觉得为什么这么大的空间里面只有一个按纽，为什么没有拨号键、挂断键，我觉得极其不方便。而且两边留这么多空白，为什么？ [14:2:54]
傅盛: 我一直觉得这个设计比较糟糕，后来一直到有一天在青藏高原，我带不到两岁的女儿到拉萨，我每天拿iPhone给她放动画片，然后有一天她就拿着iPhone放动画片，而且动画片不在第一屏，在第二屏，找到她要看的。有时候滑错了滑到第四屏，他不会返回，按了一下home键，每次按错了就按home键，他总是能找到他想看的动画片。这个强烈的刺激了我，这个键让你找到最认识的场景，然后从那里开始起步，这让一个不满两岁的小女孩都知道怎么用这个手机，这就是极其简单而且牛的设计。 [14:3:0]
傅盛: 有一天我跟雷总聊，他说你用Android吗，只有一台iPhone，于是他说送你一台G1，我看到底下有五个键，我一开始看到G1，我想终于有了拨号键、hom键、滚轴、挂断键等，但是我混换了，我不知道这几个键我要按哪个，每次脑海里都要映射一下这个是返回、这个右键，这几个键让我真的很头疼，很快我就把它送给了别人。后来我看Android机也都取消了一些键，突出home，这种设计你发现它极其简单，我拿到iPad那么大的区域也有一个键，我想这也是他们设计的延展深入，这一点我觉得也很简单，到底是什么是简单的产品。这就牵涉到我们今天讲的简单，简单无数次被提到，很多人都在说我们要简单，但其实简单是一个非常难的事情，你要把一件事情做的简单非常难，因为人的欲望不由自主，脑海的想法天马行空，英雄气概又是无与伦比的，所以觉得我总可以做出一个概含全天下的软件。 [14:3:13]
傅盛: 那么为什么不能做一个简单的软件呢，第一时代变迁，以前是工程师时代，工程师是什么样的人，就是在座的各位。我已经不是工程师了，我已经听的云里雾里了，工程师能听懂，这让我很佩服。当第一次出现W95的时候，我们学的DOS不能用了，女生用电脑水平大幅提高了，我们不能再到女生宿舍帮她们修电脑了。那时候电脑是工程师的玩物，那时候更关心CPU、更有运算能力的机器，而不是使用简单的机器。我记得我第一次去机房的时候，当时我们面对电脑根本就打不开，好不容易有人摸索到电源键打开以后根本不能用，因为你不知道DIR命令，你就没法儿用。这就是工程师时代大家对电子用具的反应，那时候都要经过很多培训，你需要用最专业形式把它用得很好。 [14:3:24]
傅盛: 今天是一个大众消费时代，每个人都在接触电脑接触手机，他们不需要专业，他们做出选择的时候，尤其女性做选择的时候是右脑思维，尤其像汽车这个东西，买回来，你问她什么牌子，不知道，变速箱什么档位？不知道。啥都不知道，就是因为好看就买回来了。所以这个时代的变迁是巨大的，乔布斯当时被赶出苹果和回到苹果所做事情本质上没有太打不通，都是要做一款又漂亮又美观的电脑，但是前一个时代成本非常高，大家不愿意买他，但是后一个时代成本还很高大家愿意买它，一个iPhone是一台小米的两倍以上，但是因为它足够简单足够方便反而使得它更受欢迎。 [14:3:33]
傅盛: 我们在讲红海竞争需要简单，你认为蓝海的话很快变得血红，这其实也是一个时代的变迁，十年前没有人知道互联网能长这么大，包括我们伟大的党对互联网的管制也为零，你买台电脑弄跟网线就能连上网，也没有伟大的墙。到今天谁都觉得互联网是个伟大的产业，今天所有的资金人力政府都在关注一块的时候，今天互联网竞争就是红海，这时候红海竞争比任何时候都要复杂的多的竞争，所以有时候我们可能需要考虑更简单的思路做一件事情，而非更复杂的。我一直在想什么让一款凉茶销量超过可口可乐，是什么让他在品类众多饮料市场变得那么突出。 [14:3:42]
傅盛: 我们今天回过头来想，在互联网行业也需要在这个方面思维，它就是把一个简单的理念传播给大家，就是怕上火喝王老吉，当然现在是加多宝，他都在传递一个简单的理念，没有18层净化、没有5000米高山，因为它简单所以它几乎难以复制，你在各个方面跟他实现一样立体化策略才可能追得上他。推荐大家看《商战》，如果你们真想了解竞争、所谓3D大战后面怎么走，看了可能有一定的谋略。里面有一句话说你所有战斗所有工作都在人的脑海内展开，人的脑海只有几英寸，你要在几英寸中夺得制高点，夺得心智对你的认同，这个概念非常简单，如果不简单就会失败，因为没有人记下那么多、没人帮你传播那么多，所以要足够简单的策略足够简单的品牌让你的产品深入人心。 [14:3:48]
傅盛: 项目要成功就一定要简单，我经常都觉得很多时候我们不是用一个更完美的管理方法让一个项目变得成功，而是外一套更简单的思维让项目变得成功。我曾经有一个在美国微软工作过四几年自身工程师跟我聊，他们觉得他们的人都很棒，但是在对工作竞争过程中总是觉得非常不给力。他想知道中国互联网公司为什么发布速度那么快，我问他们怎么做的，他们一般两个月项目讨论项目，两个月时间一项目思想，再用两个月时间写一个不用代码的测试环境，准备开干的时候有时候项目就被砍掉了，每一次项目都做的极其复杂。像Google这样的公司项目管理能力可能还不如微软，我今天也不认为互联网公司管理上超过了传统公司，但是项目变得非常简单，每个目标都变得非常简单，周期变得很短短。所以有个航天飞机和宇宙飞船的例子，宇宙飞船的思路非常简单，美国人说了他们要做最完美的航天器，非上去可以坐七个人以上，飞到空中是空间站，然后下来还可以再飞上去，结果五年以后五架航天飞机掉了两架，每次都有大量的维修费用，每次飞的成本比丢带一个宇宙飞船贵的多。 [14:4:2]
傅盛: 因为这个目标太复杂，想要完成所有的目标，所以必须做的像一个飞机，大翅膀每次发射的时候空气阻力特别大，容易烧毁。飞回来，翅膀机动性还要好，所以后来美国也承担不起它的费用，就退出了。所以即便是一流科技都容易出很多问题，我经常用这个例子跟我们产品经理聊，你们一定不要做航天飞机，一定要用飞船的思路可以做，很多环节可以交给别人做，这版代码没写好再写一版，不要这一版就把所有代码写好。 [14:4:5]
傅盛: 如何做到简单，这也是个非常难的问题，一是为小众设计，我认为所有大众产品其实都是在为小众设计，然后变成大众产品。大家知道十年前的百度也是工程师的产品，如果为大众设计不需要那么多网页，很多都是专业文献。QQ最早进行视频聊天，大家还都在拨号呢，其实也是为小众设计的。大家看过《国产007》，达文西发明了超级杀人武器霸王要你命3000，有硫酸水、西瓜刀、手榴弹，各种他觉得能杀人的绑在一根棍子上，然后做成要你命3000，这不就神经病吗。 [14:4:25]
傅盛: 但是我们很多时候做错的产品都是神经病产品，一个界面放尽可能多的按纽、尽可能的功能，指望用所有功能去覆盖大众，其实这是一个非常非常难做的事情，而且会出问题，你的产品变得机器复杂、界面机器臃肿，用户印象非常不鲜明。 [14:13:13]
傅盛: 如何去设计一辆车让邻居的妈妈可以用，让年轻总裁可以用、让泥瓦匠可以用，答案是你只能设计一辆敞篷皮卡。因为年轻总裁可以用，他追求酷绚，泥瓦匠要放楼梯给人修东西，妈妈要后椅宽大适合孩子坐，所以就得是敞篷皮卡，但这样的车出来一定没有人买。这样汽车公司就要生产三款车，你没有能力生产三款就要生产一款未来用户接受的车。所以定义你的用户群，让用户群尽量鲜明，而不是面团似的用户。 [14:13:32]
傅盛: 有的时候用户在我们脑海和嘴里都是面团，你把他挤成什么样就是什么样，想清楚你的用户是什么样的。你可以把用户定义成有鲜明形象的人，比如蒋涛是我们的用户，我想想他会用什么样的，比如我们刚刚推出了一个手机读吧有他的头像。如果你是个诺基亚的产品经理一定做不出一款iPhone，不要看它那么简单该做了一个大屏，那个时代你的用户是谁，你的用户那个时代经常打电话iPhone一定出不来，因为大屏耗电量一定增加，就做不到七天待机，每天要充，一想这个头都大了。然后不能丢弃物理键盘，那些短信狂人，一开始很多人不接受iPhone，就是这个东西没有键盘发短信不方便。当你要追求上网体验的时候，iPhone最早短信不能转发、不能群发，很多功能都不行，iPhone声音实在太差了，iPhone一开始就是对移动上网甚至包括手机游戏最感兴趣的那些人。你定义出这么款产品，等3G时代来临的时候大家都开始上网，才知道这个东西是这样。 [14:13:42]
傅盛: 尽可能缩短开发周期，这有个前提，在你的产品整个想法成型之前要想清楚你要做什么，超过三个月周期的产品都要砍掉，而且往往是压缩一半的时间，后来我们变成每个版本发布时间都变得非常非常短，如果每次发布都要一个长的时间，因为没有人保证他一机中的，没有人保证方向一定是对的，一定有偏差，如果发布时间特别长，你有时候用这样一个路径完成了这样一个步伐，每次你都有调整的机会。由于你开发资源受限所以会把事情想的简单，我在做某个数字产品的时候，当事人非常少，我当时规定一周一个版本，当时业内也是最早的，当你想到只有三天时间可以开发你就知道这个版本只能做一个功能，这个功能一定是你能想到的最需要的功能，其他看到的ABCDE都可以丢掉， 每次都保证一个功能的时候整个产品结构、界面、宣传都变得简单，所以做到足够简单。 [14:14:2]
傅盛: 极简界面元素，元素尽可能减少，我们这里只有两个按纽，一般四五个罗列在那儿，后来我们一个个砍，最后发布的时候一个同事做过浏览器经理，他说我们大概五个都没干，但是当时猎豹浏览器搜索15万在百度，行业内最高的一次。我们尽可能把这个地方做得极其简单，我们在导航上也是花了很多工夫。Path1.0是远远低于预期的，把所有人头像在这里，按纽在这里，界面小，还有很强的背景，非常复杂。 [14:14:17]
傅盛: 到了Path2的时候改进了构架，所有按纽都在一个+号里面，头像是个9，需要的时候就看一下，所以2就获得了非常大的成功。我们有一款产品叫做电池一生，在iOS上电池一生是最大的工具，我们的对手非常痛苦，我们的对手做了××省电王，但是后来发现用户根本没感觉，不知道有这个功能，所以大家知道当一个产品界面做到极其复杂的界面的时候，用户都不知道你有这些功能，每个按纽损耗率都非常高，还不如做垂直APP，所以根据这个思路做了手机毒霸，界面上就两个按纽，我认为安全软件竞争一定不是这样，别什么功能都放上去了。 [14:14:32]
傅盛: 大家不要看只有两个按纽，我们放入了金山毒霸PC所有云端技术，我们对这些APP行为的分析其实已经做到最深，但是只放两个按纽就是定位极其鲜明。今天市场上充斥着那么多产品，你能让大家知道你的产品就很不容易了，又知道你的产品是干什么的，那就超牛了，所以极其简单定位你的产品、设计你的界面，这样才能在竞争当中博得你的地位。 [14:14:34]
主持人: [14:14:45]
主持人: 非常感谢傅盛，我们上午的安排是希望给大家更多开拓眼界的机会，我们看到有算法，还有说算法的分论坛，上午的编程也有一个论坛，还有产品论坛，我们下午有更多干货，明天全天有将近十场分论坛，希望大家准时到会场。 [14:14:52]
主持人: 我是CSDN和《程序员》杂志总编刘江，非常高兴今天大周末的这么多人来参加我们的活动，上午的话题好像跟程序开发关系不是最直接的，但是希望大家能体会到软件开发，上午蒋总说软件正在吞噬世界，包括最近新数了一本书叫《算法统治世界》，我们软件开发定义范围也在扩大，所以我们要更多了解向产品、数据算法方面的，我们今天上午话题比较宽泛一些，希望能给大家开阔眼界的机会。我们下午回到主题上来了，有架构、新技术，明天我们日程安排的更紧，需要大家做好规划。 [14:15:30]
主持人: 我们下午首先有请腾讯开放平台陈磊副总经理给我们介绍一下腾讯开放平台的架构设计和实践。 [14:15:40]
陈磊: 程序员同学们大家好，讲之前我问一下有多少同学是已经在腾讯开放平台上做应用或者创业的？这么少！有多少没有在腾讯开放平台做应用或者创业的？潜力巨大啊，大家显然错过了一个良机。腾讯开放平台是中国最能赚的平台，我们第一波的纷纷都上市，很多月收入超过千万的用户。刚才举手的都是在蓝海里面发展，现在还是有很多机会。 [14:15:55]
陈磊: 开放平台，我想讲的角度是从设计开放平台的角度，开放平台是怎么设计的？也不完全局限于领域，大家知道开放这个事情不是个新鲜事物，早在宋朝的时候就有一位奇女子，率性开放，她的名字也家喻户晓。而且开放的种类多种多样，可以是一种开放的生活态度，也可以是一个开放的信息渠道，也可以是一个开放的国家，也可以是一个开放的社交平台。但是，不管是什么样的开放，它的本质都是一样的，是什么呢？就是把原来专用专享的资源开放出来让很多人可以使用，并且在使用过程当中创造更大的财富。大家都明白潘小姐的开放程度。 [14:16:5]
陈磊: 做开放平台有三个要素，所以我们一开始就本着这三个角度设计的，首先是系统，系统的作用是让资源能够流通起来，能够被第三方使用。最终的目的是形成一个生态环境，让大家在这个生态环境当中能够创造价值。还有个是政策，开放的时候必须有政策让开放平台形成的生态环境正像互动，不能让资源很容易就被少数人独占。而且这个资源的使用不能是主流型的，所以我们国家有一个特殊的职能部门叫发改委，腾讯也有一个开放平台部，它的一部分就是去制定政策。再一个就是运营，运营业非常重要，运营的目的是让这个生态环境活跃起来，把第三方引进到我的生态系统里面去，竖立标杆，起到一个领头的作用，去扩大提升资源的使用效率。 [14:16:13]
陈磊: 这是开放平台的三架马车，缺一不可，我回到之前的问题，比如说潘金莲的开放是一个悲剧，为什么是悲剧？其实她的资源是很好的，系统也不错，王婆的运营也是非常出色的，但是她没有一个正向政策去引导她。不说潘小姐，我们说腾讯开放平台，它首先是全方位开放平台，海量用户关系链的开放，同时包括触达海量用户的渠道，开放平台上被用户广泛使用的而且喜闻乐见的功能，比如相册、音乐、视频、微云等等，把这些功能开放出来，让开发商在这些强大的功能之上继续创新。还有就是能力，腾讯这个平台把海量计算能力、安全能力、支付能力开放给第三方开发。 [14:16:35]
陈磊: 开放平台系统架构，大家可以看到API体系，第三方可以条用我们的功能，有个帐户，QQ号是用户的隐私，我们在开放的时候不能把用户QQ号随便泄露。之前我们在QQ号资源也是外面很多黑客每天都要想办法挖掘的，他们掌握了这些QQ号骚扰用户，所以我们有OpneDI体系、QQ互联体系，同时我们在改变加强我们一些应用开放方式，让我们可以在第三方引用UGC。渠道我们有三个渠道，一个是社交，比如说微信信息、QQ消息，这是 互相之间沟通的渠道，我们把沟通渠道有管理有政策的开放出来，让第三方利用这个渠道沟通。社交广告的魅力在于精品投放，通过我们对用户的理解和关系链的理解、用户行为的理解，正准的把这部分用户推荐给喜欢这些应用并且付费的中心，应用中心是个很大的路口，很多应用挂在应用中心上，这个里面可以查找应用，渠道之外就是腾讯云计算的能力。 [14:16:47]
陈磊: 系统架构之下就是政策架构，政策架构是怎么样把钱分到开发商商里，支付分成是对C收钱，我们最新建立的政策是支付分成和对D收费， 这上面任何一个政策都是公平的，也是引导性的。开发商星级管理体系是希望支持扶持优质企业，核心目标是让更多的创业者可以得到资源完成初始活动，除了扶植之外还有运营规范，运营规范要有安全的平台，要有一定的可行性，不能涉黄、涉黑和反动，你不能随便仿变异别人的一个应用。你要善待你的用户，有用户投诉我们有一个受理政策。 [14:16:59]
陈磊: 我们还建立了运营架构，运营核心目的是收入和活跃，收入这边想了很多方法让开发商赚到钱，包括有付费业务和平台上的付费包月业务介绍给他们，帮助开发商让这些用户使用他的业务。包括金券体系拉动付费业务，包括建立任务集市，让没有成熟商业模式的用户可以对D收费。在活跃这一栏，我们经营一些项目，比如电商应用、母婴应用、视频应用等等，开拓更大的电商广告投放。同时我们也希望开发商引导开发商认证空间跟他的用户空间的联系，在用户空间沉淀粉丝，这些粉丝是将来推广这个平台的最核心，包括帮助开发商提高广告投放的效率，在我们平台上获取用户的成本，比如说游戏，是非常低的。 [14:17:12]
陈磊: 这些架构体系的建设是基于一些原则的，首先是安全，开放最重要的是保护拥护和开发商的安全，从用户角度隐私不能被破坏财产不能被欺骗；从开发商角度要保护他的知识产权、代码不被人窃取、保护他的系统不被人攻击。透明，我们没有一个绝对公平的政策，但是我们希望它是非常透明的，让大家都能看到，没有暗箱操作。高效，我们希望我们所有渠道效率更高。共鸣，建立一个共鸣的生态环境在这个环境里边用户、第三方和平台都获益。所有这些都是跟技术相关的，都需要技术去保障的，我重点讲安全和高效。 [14:17:20]
陈磊: 安全，我们有一个qqID体系，每个应用对于同一个qq号得到的是不一样的，一个号有一个opneID。其次我们把很多用户行为收敛成平台一个fusion，所有API应用会盘固到一个安全系统通过一些安全模型来分析，看有没有开发商滥用的行为，这些安全模型包括看他的频次、同一个用户调用是否合理，我们都去放蜜罐探测应用对用户的引导和他使用的应该流程。发现问题之后我们会及时处理，比如说降低他的级别，甚至不让其使用。安全扫描，很多时候不同开发商开发出来的应用价值是没有保障的，我们进行代码扫描，部署到我们设备之上就先扫描。 [14:17:31]
陈磊: 其次我们在外网不属于安全扫描的系统会去尝试攻击这些应用，找到这个应用的隐患所在。自动化测试的目的是看到这个应用是否打得开、响应时间是不是还OK，假如应用打不开了我们从应用中解决下一步，这也是用户使用高水平高质量应用的前提。保护用户财产重要的一点是用户怎么支付，我们采用Q点直付的方式，使平台能够保证用户支付的安全性。在Q点直付系统采用双token认证，首先有一个token证明这个是用户发起的，我们还让第三方确认知道的确是他那边用户发起的，钱已经支付了，然后是腾讯平台告诉他发货，确保收费和发货流程，整个环节进行多级队长同时提醒用户支付和便捷查询。 [14:17:53]
陈磊: 保护应用安全，最有效的策略之一是把外网IP收敛，没有外网IP就使得外网来的攻击到不了。我们有一个系统叫TGW，当外网用域名访问我们内网一个设备的时候，开发商外部服务器的时候，先跟腾讯TGW建立连接，腾讯通过七层解析知道域名在那儿，然后根据域名再去绕，腾讯TGW再跟后端建立联系，腾讯TGW是一个可扩展的系统，扩展是采用OSPF协议，这其实就是最短路径，所以腾讯TGW可以用于反DOS。 [14:17:56]
陈磊: 此外腾讯平台内，我们DFW是把不同开发商设备分割开，当不同开发商在我们网络环境内也不能互相攻击，这是通过一个网槽实现。还有一个Netagent，你从内网不外翻也不行，洋葱系统是检查每台设备本身这套系统。宙斯盾是仿ADS的系统，ADS系统核心是保证内网流量。 [14:18:9]
陈磊: 高效，腾讯社交广告跟其他传统广告最大的区别是我们知道用户的信息，同时我们也知道用户之间的关系，把用户之间的关系，比如说你的好友在使用什么应用，这个我们就会在广告系统内倾向性的把他的广告展示给你，这两个优势使得我们广告系统能够非常的精准。比如说有的用户在我的游戏里面已经玩到第七关了，但是有俩月没来了，我又发明了新的玩法，我放在这个应用里，我感觉这个用户为了这个新玩法会回来的，我可以告诉平台专门为这个用户打一个广告。 [14:18:44]
陈磊: 社交渠道，比如说我的一个好友在用胡莱三国，他可以发一个广告让我也用三国，可以用奖励的模式促进给用户发邀请的积极性，邀请只是其中一种模式。社交渠道里面最重要的是智能化，每天通过社交渠道发出来的feeds量非常大，我们通过对用户的理解、通过机器学习找到最合适的通知渠道，比如说通过QQ提醒，同时挑选用户最感兴趣的消息，保证用户首先看到这个消息。在应用中心里面我们采用的也是智能化的训练方式，对于每个用户来说我展现的应用是不一样的，比如说男性拥护和男性用户喜欢玩的游戏是什么，同时我们有很多应用，让对不同应用感兴趣的人可以直接进入这些类比，形成一个集市的效果。 [14:18:57]
陈磊: 我就讲到这里，谢谢大家。 [14:18:59]
主持人: 刚才陈磊讲平台设计，我们很多人其实不是在做平台设计，但是其实开发API不是像腾讯这样的大公司干的事情，在国外规模并不大的公司甚至很多创业公司都在开放API，这是一个很好的模式，API是技术员完全可以直接对话，我只要开放API第三方就可以使用我的系统。但是这背后有很多东西，首先是你的安全，如果一下子这个API就火了，你能不能撑得住。我们下面有请岳i来介绍Twitter的搭建系统架构。 [14:19:42]
岳i: Twitter的创意自始至终都非常简单，一开始只是这样一个基本模型，发展了六年还是非常简单，基本上核心业务第一是时间线，所有看到这个内容的顺序就是时间线。第二条内容单位就是推文，第三就是推文所有者以及用户ID。基本来说Twitter所有核心计算都是围绕着这三类基本数据进行的。 [14:25:20]
岳i: 它的计算类型，当一个用户生成一条推文的时候必须存储在一个可靠的文件，所以这个步骤是有很高实质性要求的。但是当我所读我所订阅推文的时候，这时候可以读比较早的忽略则新的内容，但是读通路和写通路数据要大的多了，，写通路一秒钟，Twitter大概5000条推文声称，但是可能有几十万条不同请求。读一条可能要用几十条上百条的推文，这个数据量很大，所以读通路和写通路大大不同，读通路需要写通路配合，使得通路获得最新的信息，这个过程会提高写通路的延时。最后一类是用户不容易见到的离线通路，比如说做一个数据统计或者分析，可能会经过一些比较复杂的计算，但是它的时时要求是最迫切的。 [14:25:29]
岳i: 摆在Twitter系统工程师面前的问题是我们有不同的计算和不断扩展的应用，系统要搭建一个平或可以扩展的平台，不关心应用是哪一类型的，不管是符合哪种计算类型的服务都要及时开发，有效地利用生产环境提供各项资源。我今天从三个方面来讲，从设计角度来讲，Twitter体系架构有什么样的变迁，第二是新的技术嫁给上怎么做开发，最后讲一下公司早期很容易被忽略的管理成品环境。 [14:25:37]
岳i: 刚才说Twitter就是三个基本数据，用户、时间线、推文，很早的时候Twitter确定了对这些基本数据进行存储，所以在存储和数据提取有用户存储、用户交互关系存储、推文的存储。用户对推文有几个所有关系，所以从开始到现在没有特别大的变动。但是对上面的数据处理以及对数据进行渲染，都是有一个基于一个应用完成的，随着Twitter的发展这个应用越来越大。 [14:25:51]
岳i: 当这个应用大到一定程度，我加入Twitter的时候，Twitter有300个工程师，你想想几十个人在同一个业务上开发很容易发生代码冲突的问题，所以需要把Twitter一些核心功能抽里出来，比如有抽离用户对象服务、处理时间线服务等等，有这些基本服务的时候是不是就可以说把旧有外部请求转移到新的体系上？当你有一个新系统没有经过测试的时候转移是有很大风险的。我们新系统开发是两年前，当时如果转移不成功对Twitter是非常大的打击，所以我们需要有一个非常平稳的旧系统向新系统过渡的过程。 [14:25:59]
岳i: 当Twitter只有一个应用层的时候非常简单，我爸这个请求按照流量均衡原理发给不同系统，Twitter一年半以前将我们自己写的基于JBM反向代码投入服务使用，这个服务完全是自己写的，里面有很强的过滤支持，可以灵活配置，可以选择将多少外部请求发送到旧有应用，也可以发给新的API中断，还可以发送给新的Web终端，我们到现在还没有百分之百脱离这个应用。这个体系从单篇化变成模块化，从运行环境讲放弃了Ruby，转向了JVM。系统提高了性能，硬件资源利用率提高了，改进了可靠性，缩短了开发周期，明确机构划分。 [14:27:1]
岳i: 当我们有了新的体系结构的时候，现在的开发是什么样的，？我首先说一下模块化的利与弊，模块化有很多好处，单位开发缩短了，第二有了系统边界以后，一个系统服务失效发生异常不容易扩散到系统其他部分。另外在资源规划的时候，系统各个部件增长不见得同步，模块化也有些问题，以前在本机上的操作现在可能通过远程调用，网络游复杂性和不确定性，延时上需要考虑。当很多团队同时开发的时候，没有很好的协调开发商有些问题，所以模块需要交互的时候很有可能交互的结果就是不确定的或者不兼容在里边。怎么样更好地发挥它的长处，同时避免一些问题？ [14:27:32]
岳i: Twitter对于这个问题给出的答案是及早地构建一个可以复用的基础设施，因为分布系统中所有服务是需要面对的，比如怎么来管理连接，怎么处理并发，这些问题是共同的。所以Twitter就设计了RPC服务框架和工具，把刚才的问题通过一个函数库来支持。Twitter意识到在大型系统中要知道系统是否可靠，很重要的是对系统各个部件进行有效观测，大概两年前Twitter完全从底层开始设计了系统运营数据收集、存储、表达和系统健康状况预警，同时还支持分布式的追踪。分布式系统测往往需要一个驱动器，还有接口生成标准等等。 [14:27:39]
岳i: 这么多可复用基础设施，如果写一个新服务的话它长成什么样子，首先你得给它一个名字，指定要执行什么样的协议，同时指定一排服务器响应多少请求，数据收集和分布式把数据发到不同地方去。软件开发者如果发一个新的服务，就是最后一步，当要实体一个服务的时候，或者说你有一个请求做出什么反应，开发商是怎么响应一个请求，这就是这个工具比较强大的一点。 [14:27:51]
岳i: 通常每一个工具，它还是客户端，你告诉他怎么发现服务的位置，也就是服务的名称，怎么管理他的连接，在连接失效的时候怎么处理宣传失败的状况。现在Twitter比较核心的服务都是基于这样一个结构来设计和实现的，比如时间线服务是最重要核心业务之一，它在使用了框架以后，现在Twitter大约有1.4亿活跃用户，时间线流量大概每秒20万次请求，时间线做99%情况下低于四毫秒做出响应，总得来讲这个服务性能还是非常令人满意的。 [14:27:58]
岳i: 分布式追踪看似并不是特别重要，但是对开发者来讲非常非常实用的功能，这是分布式系统给出响应一个时间线服务所做的调用，包括这些调用发生的次序，每次调用所占时间都反映在图表中，这对开发者来说非常重要。 [14:28:9]
岳i: 最后讲一讲管理成品环境，成品环境在软件开发早期，人为干涉人为管理的时候在你有成千上万服务器的时候就完全失效了，而且对于一个快速发展的公司来说有一个问题，成品环境的管理是需要很长周期建设的，不是说今天人为管理明天就可以精细化管理，这需要公司有远见及早进行这方面的投资。成品管理有几个目标，第一个是可用性，你的硬件资源还要有效使用，当达到一定规模的时候要是自动化的。Twitter的答案是Mesos，我们一般操作系统中由内核负责资源分配和程序的调用，Mesos就是在一个分布式系统中的新内核。Mesos首先整合资源，就是这些服务器，把它拿过来进行统计，根据不同应用需求，任何应用只要向Mesos请求资源，Mesos都能够给予支持，今天在Twitter开发一个新服务的话，它的调用有可能通过Mesos的布局。 [14:30:37]
岳i: 它还支持自动的把服务的位置报告给观测者，观测者可以持续对服务健康状况进行观测，这些都是Mesos的好处。我们可以看出它在自动化管理方面起到很大的作用，刚才说的目标还有可靠性和效率，这方面Mesos也有很大的帮助，假设你的服务器是定向的设置，但是现在不巧有50%电源坏了，那么Mesos能够探测到硬件资源失效，他还是尽量满足资源需求，他就把失效机器从资源中分离出去，重新分配相应资源里满足服务资源需求。也就是说不需要人为干涉的情况下保持它的有效性。另外一方面就是效率，Mesos把资源抽象化了所以可以多个应用一个服务器上。 [14:31:48]
岳i: 总的来说，Twitter过去两年体系结构的演变吃线了体系结构模块化服务开发抽象画和资源管理抽象化，作为一个系统程序开发者的角度来讲，当我刚刚加入Twitter的时候，Twitter的后台开发基本上没有拜托把已有开源项目放在一起的模式，随着开发能力不断加强，我们通过了项目拿过来改，现在Twitter已经完全有能力向下深入。虽然Twitter和国内很多互联网巨头比起来还是一个后者，但是作为一个系统工程师这些变化是非常令人振奋和激动的，对我来讲是作为系统开发的乐趣所在，所以希望大家关注Twitter开发的进展，对于已经有的开源项目有意见，我们也非常愿意聆听。 [14:31:57]
主持人: Twitter有很多开源项目，他们官方帐号都有，大家有兴趣可以去看一看，我也希望更多的技术人员参与到国外的开源项目当中。接下来我们从Twitter转到移动，我们10月份有一场专门的移动大会，所以本次大会移动内容并不多，我们今天的这位可能是唯一一个，我们欢迎徐D。 [14:34:58]
徐D: 三天前收到同事微博转发，说现在一个手机计算和1969年美国航天局把宇航员送到月球上的计算是一致的能力，我们现在用这个能力去抓只小鸟，这可能从某种计算角度来说有一些大家可以考虑的。手机现在已经发展到相当高的智能水平，我们除了在手机上玩疯狂小鸟，我们作为一个开发者，如果现在还没有去想这个企业或者业务在移动平台上发展整体的技术的话，我下面的演讲可能对你有点帮助吧。 [14:35:12]
徐D: 我们并不是一个昨天成立的创业公司，这家公司在美国运行移动开发平台已经有5年历史了，最早我们试图想做一些应用开发工具转型到目前阶段，我们不管前台开发还是在云计算平台上后台服务器的建设已经走过了一个成熟而漫长的过程。目前为止，我们大概其有4万个移动应用，我们自己开源社区大概有30几万开发人员在上面进行技术交流。本身来讲，我们的后台有5万多个应用，基于亚马逊后台服务商。像美国电视台对2012年奥运会都是在我们这个平台上做出来的，所以我们已经是一个面向成熟的技术，之所以说我们是新一代最新的是我们有想法做一些事情。 [14:39:58]
徐D: 现在IT行业有三个非常大的方向，很多人刚谈过云，云涉及到硬件和技术结构这些方面。有很多人会想社交网站，这种模式更多是和互联网相关，本身社交网站也是方兴未艾。另外就是异构，如何把这三个最热门的技术结合在一起？我想大家意见是和我们一致的，我们要通过移动应用做这个事。我跟大家分享一下我们公司最近的讨论，大家也看到很多人都在讲facebook股票上市以后跌到不到18块钱，我们从一个使用者来看的话，到2012年7月份截止，互联网流量有一半在手机平台上，如果刨出企业级正常流量，大概一半流量通过手机来实现的。 [14:40:20]
徐D: 你看facebook被手机流量当成后台的存储，我们俩喜欢照相我们就做照相应用，我们喜欢医疗或者其他方面的信息，大家会开发出非常小型的特别有针对性移动社交平台来做。所以说facebook最大的挑战是把大家在前台交互的信息也能拿到他的平台上来。所以我们看到了有三个最主要的，社交平台、异构和云。 [14:40:22]
徐D: 在座的主要都是开发者，大家对office7比较熟的有多少？勉强1%，JAVA呢？50%以上，JAVAStrme？可能更多一点，大家知道从2007年第一台iPhone出现，到W7、W8，在互联网上到2012年操作系统战愈演愈烈，大家为了把自己的平台做的巩固而深入采用了不同的应用，微软延续了.net平台，我们看到整个从技术层面上来讲，开发一个垮平台应用挑战性多大。你的应用开发完了之后你会发现如何把应用做到更新挑战更大。我们跟客户交流的时候发现，当我想做一个小小的iPhone应用的时候都要把它外包出去，如果我想支持Android的时候还想外包到另一家，成本上我也能接受，但是如何做一个版本的更新？ [14:45:38]
徐D: 我整个面临着非常复杂的项目管理的处境。所以我想随着硬件软件的进一步的细化，我们看到大家挑战是增加了。经过这么多年的技术积累，我们现在能够在这个平台上做几件事，这有助于帮助CTO跨平台开发者理清一些问题。 [14:45:47]
徐D: 我们的平台上做了三个工作，第一是做了一个开发工具，我们用了JAVA Sprit的程序针对iOS、针对Android、针对iPhone，针对不同平台做开发，逻辑是JAVA Sprit，这是我们啊和竞争对手这么多年反反复复的比赛得到了一个比较清晰的思路，我们有开发工具支持多平台开发，我们需要一个开发主语言，这样才能保证用户整个的体验。 [14:45:56]
徐D: 在开发平台之上，其实我们做了中后台云的支持，为什么做这个？因为我们开发者在三年前做iOS的菜单分享，前端两个开发人员三个月基本做好了，我们想设计一下后台数据库，需要大家交流、需要有户、需要连facebook、Twitter进行后台验证，这些后台工作两个人用了五个月时间，而其实我们真正想干的是前台应用。所以当我们痛苦地做完了以后发现，其实很多开发者跟我们有一样的痛苦，就是我其实想在前端做应用，但是我不得不把我很多精力和金钱用来在后台的搭建和服务。 [14:46:8]
徐D: 所以当我们把那个做完以后，我们说我们一起做做云，这样我做了一个什么工作？我们把数据库全都设计好，在上面加了SEVER，不管你是什么你只要调用我的API，你很多工作不用考虑了。我们在座的开发者一直在做重复开发，每个人都去一个地方找出口，回来再写代码，所以说在我们有了有效的前端开发工具，有了后太云的基础上，我们开发了一个开发者的模块商店，在这个模块商店里面你说我想连一家apple，我想连一下Twitter和facebook，这些接口已经是标准的了，你只是花两块钱把代码拿过来就行了。 [14:48:52]
徐D: 为什么我们这个产品有一定的生命力，我们是让所有的会使JAVA Sprit的人在这个平带上开发一个东西。这个领域不单单涉及到操作系统支持、浏览器支持，甚至有些硬件还要支持。这之后你要再把应用跨平台、跨版本上使用，整个发展方向上一定会有人胜利的，本身我们认为公司的JAVA Sprit会胜利的。我们有非常大的开发社区，在北美、欧洲、日本、台湾，这个开发平台上不单单让你做前台开发，我们还有后台的服务，只需要一个API就连到云上来，我们在国内也找一些本地云提供商，拿过来我们的后台解决方案做开发。大家有兴趣的话可以试一下我们的平台，你会发现它把一个开发者想要的最简单地融合在一起。 [14:54:6] 徐D: 我们这个，由于使用了我们的前端开发工具，我们有几个例子，PWC是欧洲最大的一家咨询公司，NBC是电视台，zipcar是美国移动用车服务，我们跟他们合作中发现用我们的Appcelerator做开发的时候，当做到第六个月的时候我们已经做了第四个版本的上市开发。PWC我们做到第八，大家应该有经验，一般开发3个月到半年，如果半年的话就不用上线了，在跨平台开发现在就有几家在做。 [15:8:10]
徐D: 我们的内部结构，左边分支是一个源代码，你可以选择支持什么版本，我们100个工程师针对不同的版本把底层的UI优化，把它表现到我们的层面上来，所以对于一个开发者要么了解要么不了解都没关系，都可以在我们平台上找到你想要的。 [15:8:19]
徐D: 如果大家有兴趣可以关注我们在新浪微博上的内容，也希望可以和大家做深入的交流，谢谢大家。 [15:8:28]
主持人: 谢谢徐D，下面有请Netflix云平带高级软件工程师王晓中。 [15:8:53]
图片描述:Netflix云平带高级软件工程师王晓中[查看原图][15:14:8]
王晓中: 大家好，很高兴和大家做交流，我目前想介绍一下Netflix目前的云架构，另外它怎么建立了适合云计算软件开发流程和经常使用的云计算工具，此外简单介绍一下Netflix企业规划。我是2011年加入Netflix，现在是Netflix云平台高级软件工程师，主要负责客户端嫁给，我也是开源软件Archaius创始人之一，它是一个配置软件库，欢迎大家关注它。在Netflix之前我还在SUN Microsystems和Verisign。 [15:14:36]
王晓中: Netflix是成立于1997年，现在主要是致力于互联网点播流媒体播放，运营模式是按月认购的无限即时视频流，现在视频业务遍及美国、加拿大、英国，不久还会很快登陆在北欧几个国家，有近三千万全球视频流用户，在美国是每到四到五家就有一家是Netflix的用户。同时Netflix在经营DVD邮寄出租业务，如果一句话概括Netflix的特点我想说它是美国好莱坞电影和旧金山高科技的结合。公司两个团队，一个就是在好莱坞专门负责跟电影发行商谈业务，选择并且购买一些版权。另外公司总部在旧金山，负责研发。这是进入Netflix首页的情形，Netflix网页一个很大特点就是有个性化的推荐，第一行就是TOP10，它认为这些电影中你可能最想看的10部电影是什么，他把你比较喜欢看电影的类别放在主页比较靠前的位置。我们的PPT出现一个互动环节，这是因为我七岁的女儿经常在Netflix看动画片。 [15:15:4]
王晓中: 在高峰期Netflix数据量占全美网络数据2%，Netflix API请求增长非常迅速，从去年每月20亿次访问，到今年7月40亿次访问，为了能够接受美国超过访问量，我们有数以百计的服务。如果在美国提到Netflix，尤其在科技界，人们会有两个反应，第一就是它的推拴法做得很好，另外利用云计算比较成功。我们公司所有业务都在Amazoe的公共云中，这是因为前两年公司经历了比较高速的增长，每年有超过几百万新用户增加，而且访问公司业务的流量会有突发性的增长，比如说新的iPhone或者iPad要发布的时候公司访问量猛增，这时候公司就要投入服务器达到需求，但是中小型公司不可能为了突发性业务增长购买大量设备，所以公司就自然想到了云计算。另外公司正在把业务项全球拓展，作为一个小公司不太可能全球都有投入。公司更希望把工具放在PAAS，使用云计算最大节省IT投入。使用云计算并不意味着就有一切，我明天谈我们怎么搭建我们云平台的，大家有兴趣可以来听。 [15:15:13]
王晓中: 为什么我们选择了Amazon，Amazon在美国是最大的公共云运营商，每小时可提供上千个新服务其，提供IAAS可同时满足软件开发和IT操作，Amazon部署在全球的Regioes/Zones具有良好的扩展性、冗余性，适于拓展国际业务。在Regions里面有好几个Zones，同样道理，Amazon在美国建了很多的Regions，公司某些业务还可以在另外的域上继续做。Amazon在拉丁美洲、欧洲、亚洲都有，这样适应于公司国际业务的拓展。 [15:15:22]
王晓中: Netflix在API为中心的云架构，Netflix所有终端设备公司大部分服务都是无状态的，可以由任何一个服务器完成，为了保证良好扩展性充分利用AWS，使用分布式NoSQL存储和横向缓存。 [15:18:52]
王晓中: Netflix在使用NoSQL上的探索，Netflix选择Cassandro为主要NoSQL存储，执行CAP理论的AHP，避免Single Point Of Failure，Cassandro写也是非常快的，它的读就慢一些，它得做一些修复工作，所以减慢了一些速度。Cassandro还可以把数据自动复制到多个数据分析。Cassandro也具有可调的一致性，它让数据速度读写非常快。当然Cassandro也存在的一些问题，除了刚才提到的数据一致性稍差一些以外，我觉得它还缺少分布式文件系统底层支持，扩展性低，很难写入一些插件增强功能。Cassandro为了保证快速地写牺牲了数据一致性，这样就不能时时起动Regair，当大规模Data Regair而过程中系统可用性降低。 [15:38:9]
王晓中: Netflix是怎么样建立适应云计算开发流程的呢？我们假设这个流程开始就是设计编程，然后就是构建，在构建过程中Netflix提供统一的构建模版，这样的好处是大大缩短了构建时间。下一步是制作Amazon Machine，我们公司提供了很多简便的命令制作AMI，提供了一些参数，这些参数包括你要构建的名字和你认为它运行的时候需要的类型。在AMI制作好以后就把它放到测试环境中部署，任何一个AMI都需要通过测试环境部署，我们不允许AMI不经过测试环境直接部署到生产环境中，如果测试环境没有问题才可以部署到生产环境。部署到生产环境以后是使用Amazon，在部署完以后就会声称一个叫做Autoscaler，它运行在多个服务器上，而且服务器数量可以自动伸缩的。 [15:39:50]
王晓中: Netflix建立在开源软件啊的基础上，从某种意义上Netflix是一个拿来主义的，当他需要开发一些新的技术时，他会优先考虑那些现成的而且是已经比较成熟的技术，当这个条件不具备的时候他就自己开发一些工具或者软件。前一段时间我们已经把Netflix比较成熟的共聚合软件放在网上，有兴趣的朋友可以到Netflix的网站上关注一下。我介绍两个非常有影响力的Netflix的工具，一个是Asgard和Simian Amy。有了Asgard部署工具以后，实际上你只要在用户界面中设置基本参数，比如需要多少服务器、什么版本的AMI，Asgard可以帮你更新软件版本，假如说你监测发现新版本有问题也可以按一个键，那么Asgard就不会再接受新的软件版本。如果这个新版本运转正常，你就可以升级到新的版本上，再观察一段时间确信没有问题就可以放弃旧版本，这样就完成了软件版本的新旧交替。 [15:40:2]
王晓中: 另外一个常用的工具是“猴子军”，就是因为它里边所有工具名字里边都有一个Monkey，其中Chaos Monkey是最受关注的一个产品，顾名思义就是用来捣乱的，怎么捣乱？很简单，他会速记终止ASG中的一个或多个服务器，就是云计算中运算设备是比较便宜的硬件，这些硬件都是有寿命的，也许哪一天它就停止运转了，当然你可以把它换掉，但是换的这一到两分钟内可以少了一个或者多个服务器，这可能有灾难性的影响。Chaos Monkey是不等软件发生故障就开始模拟，在硬件不确定的情况下、硬件不稳定的情况下的读取。另外一个猴子是叫Latency monkey，它是认为的把系统反应时间延迟，系统可能正常时间需要20秒，但是它把这个反应时间延长到200秒，它的目的是看一个子系统出现延迟的话会不会对整个系统出现负面影响。 [15:40:14]
王晓中: 非常感谢CSDN和刘江老师盛情邀请让我有这个机会和大家分享，谢谢。 [15:40:36]
主持人: 也谢谢晓中从美国不远万里飞回来，刚才说的无上限休假把我惊着了，一个公司做到这样的程度也不愁未来了，确实是在一个很高的境界，希望我们中国也能出现这样的公司。我们最后一场演讲是来自支付宝的资深架构师胡喜。 [15:41:52]
胡喜: 大家下午好，我是2007年加入支付宝的，主持支付宝平台基础技术的嫁给设计与研发工作。我们跟Twitter之前讲架构历程是很类似的，05年初支付宝当时服务范围是淘宝，从2005年到2007年的时候支付宝是一代架构，前端核心和数据操作部分都在一起，那个架构支撑每天50万左右，后来我们从2007年设立支付宝二代架构，把原来应用系统形成变相服务式架构，在这儿有多少人使用过支付宝？还是很多的。到2010年的时候平均每天交易在1000万，2011年11月11日光棍节那天是1280万，技术人员差不多一千人左右，二代架构业带来很多管理上的问题、治理上的问题和未来伸缩性的问题，所以2011年我们进入三代架构，今年要求我们系统容量是多少，必须是1亿+处理能力，这背后是一个什么样的处理规模？ [15:50:17]
胡喜: 可伸缩性，提升容量百万级到亿级，系统未来交易量越来越大，必须保证交易可伸缩性。第二是故障容忍，系统收缩了会带来三个九的容忍率到四个九的可容率，四个九是一年42个左右的故障，其他任何时间都必须保证72小时服务能力。弹性控制，有了伸缩性和故障容忍带来最大问题是要能快速恢复，我们从人工控制到秒级自动调度，一个系统出了问题怎么在一秒钟之内退出自动化调度是我们的目标。 [15:50:49]
胡喜: 我们看一下支付宝版本是一个什么样的进化历程，可伸缩性，提升容量从百万到亿级，之前我们数据库的瓶颈都在一个系统，那就把数据库进行拆分，从原来一个拆成多个数据库，现在有交易数据库和帐户数据库，这就带来了支付宝第二个版本，它就有了一个问题就是一致性问题。支付宝是做资金流，最大的问题是安全性准确性，你不能说我今年转一笔钱扣了十块钱，但是另外一个人没有收到十块钱，这是绝对不容许的，怎么样保证系统一致性要求，我们设计了一个变相服务性事务框架，TryX成功，第一阶段参与者，有帐户参与者或者积分参与者，参与者有三种类型的服务，一个是try，我扣了十块钱，这个用户能不能扣十块钱，它的余额够不够？ [15:51:5]
胡喜: try结束以后，所有参与者都回答OK了，主业务方会收到所有参与者的成功信号，第二步完成后确认，所有业务需求帐务转帐请求都会达成。如果中间某个阶段出现任何故障或者问题都会调相应的cancel，我们在做分布式之前也调演过很多STX协议，我们当时做了POT模型，最黑看来这个模型完成不能使用，太耗费资源，对我们来说数据库资源非常宝贵的，所以我们最后使用了简化的TCC模型。业务一致性解决了事务性要求，但是也有一个问题，单个库的瓶颈，一个物理布局操作数字都是有限的，这样的形式下我们怎么保证它的性能，一个数据库拆分成多个，我们内部某一个用户会挂在某个数据库里面去，这样解决了数据水平拆分能力。 [15:51:7]
胡喜: 我们看一下具体拆分场景，内部交易系统会根据用户ID拆分，支付宝不仅仅服务于C用户还有商户，他们需求完全不一样，不一样的需求系统怎么样更好支持，我们知道如果一个系统想满足两个用户是几乎不可能的。我们采用了数据复制的技术，一份数据面向C类用户，另一类面向B类用户，数据复制采用可靠复制技术，不会丢失。如果你在做数据拆分的时候，你让业务编程员需要注意这些情况的话非常复杂，怎么才能把程序写的更简单些，我们把分表复杂性屏蔽掉，对开发人员来说只不过在这个运行当中会被分到某些库上去。 [15:51:22]
胡喜: 解决了数据库的单一平静，带来一个问题是网络伸缩瓶颈，支付宝如果要实现一亿交易量的话大概需要1000亿次的访问，因为我们一个系统拆分成多个系统带来问题是服务访问架，一千亿次交易都需要经过某几个耽搁设备，没有一个设备能够承担这么大的访问量。怎么解决这个网络平静？ [15:51:54]
胡喜: 我们提供了一种配置，我们发展到V4版本，有交易和帐户系统，通过服务器拓展到多个IDC，我们简单的把系统拓展到多个IDC当中去，这些解决了服务器拓展问题，但又带来了跨机房流量的问题，我们在每个机房配置相应的交易系统中心，所有应用系统只在同一个机房被调用。这就发展到地六个版本，是这样一个IDC的伸缩架构。 [15:52:32]
胡喜: 做到第六版本，差不多支付版本解决了包括IDC、支付、网络，整个容量从百万级提升到亿级，主要是通过数据的可伸缩性，垂直水平拆分，复制分布式事务，网络可伸缩性和IDC可伸缩性。 [15:53:29] 胡喜: 这是我们内部的具体架构，怎么保证系统可操作性，这个跟Twitter架构很类似的，这是我们内部的说法，实现了标准的SAA的模型，你可以访问任何的协议，底层是我们的业务服务器，它不是标准的JAVA1服务器，而是满足内部环境下的SOA化的服务器，它实现的我们内部管理模型，我们希望能够加快的访问量 [15:55:38]
胡喜: 伸缩性带来一个问题就是我的资源节点越来越多，这样的话从概率学角度来看的话，故障率会越来越高，怎么解决某一个点的故障带来的对交易量的影响？我需要做故障容忍。先看一下数据库单点故障，对于每一个数据我们都配备一个回复集群，一个出现问题的话可以快速切换，这样用户才可以继续往下操作，这是后台要做的。 [15:56:52]
胡喜: 解决了数据库的搭建问题，接下来的问题是服务的依赖问题，服务调用带来很多不可避免的问题，都会造成不可逆转的鼓掌，怎么能够更好地控制我们的服务调用，这是我们需要解决的服务以利故障，我们对内部交易系统和收费系统、商户通知、消费记录、商户查询、沟通等等交互，我们对所有系统都标识成强依赖还是弱依赖，强依赖越少越好，弱依赖可以随时随地把这个应用降级。 [15:58:40]
胡喜: 如果是收费系统强依赖的话我们可以把收费系统先关掉，很多人会问你就不收费了吗？不是，内部有一个消息系统，它会做到百分之百的可靠性，所有消息先发到消息系统中去，然后是相应的存储，系统恢复了以后再发到消息系统，在支付宝所有交易都有相应开关。 [16:0:26]
胡喜: 解决了服务依赖和数据库单点，下面就是IDC的故障，刚才说了数据库还在一个机房，假如说IDC1机房坏了怎么办，我们想要一个对等结构，IDC1机房坏了，只影响它的应用，我可以把这个依赖于换到别的机房，我们到第九版本完全实现独立IDC架构，这样在相应流量的第一个用户到IDC1、第二个用户到IDC2。到这个层面我们解决了故障系统、一个系统当中数据库、服务器、IDC、服务依赖，都有相应的故障处理机制，这就保证了可容忍性。我们之前讲支付宝系统必须做到弹性控制，什么是弹性控制？ [16:2:43]
胡喜: 那么要有一个监控平台，监控的响应时间，监控系统多长时间发现系统有问题，这是最重要的一点，支付宝有日志模型、计算模型和监控报表，内部还有一个升级版的秒级监控系统，在10―15秒之内发现所有的系统日志，把解析完的日志发送到一个计算系统，这个日志传输到HDFS里面去，这个部分所做的最重要意义是时时发现现场问题，首先要求就是要快，越快发现问题越好。有了监控其实支付宝把我们之前监控系统和内部操作系统做了一个抽象，支付宝弹性能力的API，有Operations而 API和Monitoring API，用户可以自己选择你的服务器是部署在哪个API上面。我们内部通过应用运行数据的收集、监控系统的数据缄默和计算到弹性平台的分析到产生控制命令再到指令执行。 [16:6:21]
胡喜: 比如说银行渠道数据采集通过银行据到数据监控传输给数据分析平台，如果分析发现某银行A渠道异常的话，它会根据模型产生调拨指令，然后从A渠道切换到B渠道。 [16:9:15]
胡喜: SOA治理调用，SOA最难做到的一点是假如说你有几百个应用完成，这个是支付宝的一个页面，我们写上插件的添加标记，对页面上产生一个标记，我要转帐，点击标记的+号，这样把标记提出来，这样帮助开发人员发现线上的任何问题，这就是我们说的整个支付宝的天性控制平台，包括监控、分析、弹性控制，这形成了支付宝内部弹性控制的系统。 [16:9:22]
胡喜: 人工控制到秒级自动调度，第一实时系统监控能力，必须越快越好发现系统存在的问题，尤其对于大系统来说，你是5秒钟发现还是5分钟发现那是完全不一样的，有可能最后一根稻草就把系统压垮了。 [16:9:32]
